import{f as L,a4 as V,c as A,w as p,a as e,g as a,r as h,h as r,k as i,L as T,C as u,B as C,E as j,F as _,q as $,p as c,t as K,y as R,T as U,U as E,o as s,n as M,O as q}from"./index-DcC-Gx9C.js";import{_ as G}from"./PageLayout-DQ63o1h-.js";import{F as B}from"./file-text-eFjuBtRe.js";import{A as O}from"./arrow-left-BpPp39zC.js";const P={class:"max-w-7xl mx-auto px-4 md:px-8"},z={key:0,class:"flex flex-col items-center justify-center min-h-[50vh]"},H={key:1,class:"flex flex-col items-center justify-center min-h-[50vh] text-center"},I={class:"text-stone-500 mb-6"},J={class:"flex items-center gap-1.5 md:gap-2 text-[10px] md:text-sm mb-6 flex-wrap"},Q={key:1,class:"font-bold uppercase tracking-wide text-stone-800 border-b-2 border-orange-400 pb-0.5 whitespace-nowrap"},W={key:2,class:"text-stone-300"},X={class:"bg-stone-200 rounded-xl border-2 border-stone-800 shadow-[4px_4px_0px_0px_rgba(43,38,38,1)] p-3 md:p-4 mb-6 transition-all"},Y={class:"flex flex-wrap items-center justify-between gap-3 md:gap-4"},Z={class:"flex items-center gap-2.5 md:gap-4"},ee={class:"flex items-center gap-2 md:gap-3"},te={class:"w-9 h-8 md:w-11 md:h-10 bg-stone-100 rounded-lg border border-stone-300 flex items-center justify-center"},se={class:"min-w-0"},ae={class:"text-sm md:text-xl font-serif text-stone-800 leading-tight truncate max-w-[150px] md:max-w-none"},le={class:"text-[9px] md:text-xs font-mono uppercase text-stone-600"},oe={class:"bg-stone-700 rounded-xl border-2 border-stone-800 shadow-inner overflow-hidden min-h-[600px] lg:min-h-[800px] relative"},ne=["src"],re={key:1,class:"absolute inset-0 flex items-center justify-center text-white"},pe={__name:"LearningAsset",setup(ie){const f=R(),F=U(),x=c(()=>f.params.archiveSlug),D=c(()=>f.params.assetSlug),l=h(null),v=h(!0),d=h(null),N={"naskah-film":{field:"file_naskah",title:"Naskah",type:"Naskah"},storyboard:{field:"file_storyboard",title:"Storyboard",type:"Visual"},rab:{field:"file_rab",title:"RAB (Anggaran)",type:"Dokumen"}},o=c(()=>N[D.value]||null),b=c(()=>{if(!l.value||!o.value)return null;const n=l.value[o.value.field];return n?q(n):null}),g=async()=>{if(x.value){v.value=!0,d.value=null;try{const n=await K.get(`/api/films/${x.value}`);l.value=n.data,(!o.value||!l.value[o.value.field])&&(d.value="Aset pembelajaran tidak ditemukan untuk karya ini.")}catch(n){console.error("Failed to fetch archive:",n),d.value="Gagal memuat data karya."}finally{v.value=!1}}},k=()=>{F.push({name:"ArchiveDetail",params:{slug:l.value?.slug||x.value}})},w=c(()=>l.value?[{label:"Beranda",path:"/"},{label:l.value.judul,path:`/archive/${l.value.slug}`},{label:o.value?.title||"Aset",active:!0}]:[]);return L(()=>{g()}),V(()=>f.params,()=>{g()}),(n,t)=>{const S=E("router-link");return s(),A(G,null,{default:p(()=>[e("div",P,[v.value?(s(),a("div",z,[r(i(T),{class:"w-10 h-10 animate-spin text-stone-400 mb-4"}),t[0]||(t[0]=e("p",{class:"text-stone-500"},"Memuat aset pembelajaran...",-1))])):d.value?(s(),a("div",H,[r(i(B),{class:"w-16 h-16 text-stone-300 mb-4"}),t[2]||(t[2]=e("h2",{class:"text-xl font-bold text-stone-800 mb-2"},"Aset Tidak Ditemukan",-1)),e("p",I,u(d.value),1),r(i(j),{onClick:k},{default:p(()=>[...t[1]||(t[1]=[C("Kembali ke Detail Karya",-1)])]),_:1})])):(s(),a(_,{key:2},[e("nav",J,[(s(!0),a(_,null,$(w.value,(m,y)=>(s(),a(_,{key:y},[m.active?(s(),a("span",Q,u(m.label),1)):(s(),A(S,{key:0,to:m.path,class:"font-bold uppercase tracking-wide text-stone-400 hover:text-stone-600 transition-colors whitespace-nowrap"},{default:p(()=>[C(u(m.label),1)]),_:2},1032,["to"])),y<w.value.length-1?(s(),a("span",W,"/")):M("",!0)],64))),128))]),e("div",X,[e("div",Y,[e("div",Z,[r(i(j),{variant:"ghost",onClick:k,class:"flex items-center gap-1.5 md:gap-2 hover:bg-stone-300 h-9 md:h-10 px-2 md:px-4"},{default:p(()=>[r(i(O),{class:"w-4 h-4 md:w-5 md:h-5"}),t[3]||(t[3]=e("span",{class:"font-bold text-xs md:text-sm"},"Kembali",-1))]),_:1}),t[4]||(t[4]=e("div",{class:"hidden sm:block w-px h-8 bg-stone-300"},null,-1)),e("div",ee,[e("div",te,[r(i(B),{class:"w-4 h-4 md:w-5 md:h-5 text-teal-600"})]),e("div",se,[e("h1",ae,u(o.value?.title),1),e("p",le,u(o.value?.type)+" â€¢ PDF",1)])])]),t[5]||(t[5]=e("div",{class:"flex items-center gap-3 ml-auto"},null,-1))])]),e("div",oe,[b.value?(s(),a("iframe",{key:0,src:b.value+"#toolbar=0",class:"w-full h-full absolute inset-0 bg-white",frameborder:"0"},null,8,ne)):(s(),a("div",re,[...t[6]||(t[6]=[e("p",null,"File tidak dapat ditampilkan.",-1)])]))])],64))])]),_:1})}}};export{pe as default};

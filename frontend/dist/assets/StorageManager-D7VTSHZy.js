import{_ as $}from"./PageHeader-CXGgszjw.js";import{e as j,f as L,g as u,a as e,h as a,c as h,w as o,B as m,a0 as T,k as t,A as V,E as k,r as M,aX as P,D as w,aY as A,L as G,F as p,aK as z,aL as B,z as b,C as c,q as y,G as f,t as I,o as l,aB as N,aM as E,Q as H,V as R,N as K}from"./index-CdiZ0yiz.js";import{C as F}from"./circle-alert-DxYXVwf7.js";import{I as U}from"./image-BNzKyh4y.js";import{V as q}from"./video-D9LS04B1.js";const S=j("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Q={class:"p-4 md:p-8"},W={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},X={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},J={class:"text-5xl font-black text-stone-900 mb-2"},O={class:"text-stone-500 text-sm mb-6 uppercase font-bold"},Z={class:"space-y-4"},ee={class:"flex items-center justify-between text-xs font-bold uppercase mb-1"},se={class:"w-full h-3 bg-stone-200 border border-stone-800 overflow-hidden"},te={class:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex-1"},oe={class:"font-bold uppercase tracking-wide text-sm"},re={class:"flex items-baseline gap-2"},ne={class:"text-2xl font-black"},le={class:"text-xs text-stone-500 uppercase font-bold"},ie={class:"w-12 h-12 flex items-center justify-center bg-amber-100 text-amber-700"},de={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ce={class:"font-bold text-stone-400 mb-1 uppercase tracking-tighter"},ue={class:"bg-stone-900 text-lime-400 p-2 border border-stone-700"},me={class:"text-center p-8"},ve={__name:"StorageManager",setup(ge){const g=M(!0),i=M(null),x=r=>{if(!r)return"0 B";const s=1024,v=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,n)).toFixed(2))+" "+v[n]},D=r=>{switch(r){case"videos":return q;case"documents":return K;case"images":return U;case"avatars":return R;default:return S}},C=r=>{switch(r){case"videos":return"bg-purple-500";case"documents":return"bg-blue-500";case"images":return"bg-green-500";case"avatars":return"bg-orange-500";default:return"bg-stone-500"}},_=async()=>{g.value=!0;try{const r=await I.get("/api/admin/storage");r?.success&&(i.value=r.data)}catch(r){console.error("Failed to fetch storage stats:",r)}finally{g.value=!1}};return L(()=>{_()}),(r,s)=>{const v=T("router-link");return l(),u("div",Q,[e("nav",W,[a(v,{to:"/admin",class:"text-brand-teal hover:underline"},{default:o(()=>[...s[0]||(s[0]=[m("Administrasi",-1)])]),_:1}),s[2]||(s[2]=e("span",{class:"text-stone-400"},"/",-1)),a(t(V),{variant:"outline",class:"bg-blue-100 text-blue-700 border-blue-300"},{default:o(()=>[...s[1]||(s[1]=[m("File Manager",-1)])]),_:1})]),a($,{title:"Manajemen Penyimpanan",description:"Pantau penggunaan ruang disk untuk video, dokumen, and aset lainnya.",icon:t(A),"icon-color":"bg-blue-600"},{actions:o(()=>[a(t(k),{variant:"outline",class:"gap-2",onClick:_,disabled:g.value},{default:o(()=>[a(t(P),{class:w(["w-4 h-4",g.value?"animate-spin":""])},null,8,["class"]),s[3]||(s[3]=m(" Refresh ",-1))]),_:1},8,["disabled"])]),_:1},8,["icon"]),g.value&&!i.value?(l(),u("div",X,[a(t(G),{class:"w-12 h-12 animate-spin text-brand-teal mb-4"}),s[4]||(s[4]=e("p",{class:"text-stone-500 font-mono uppercase tracking-widest"},"Menghitung Ukuran File...",-1))])):i.value?(l(),u(p,{key:1},[e("div",Y,[a(t(f),{class:"lg:col-span-1 border-2 border-stone-800 shadow-brutal"},{default:o(()=>[a(t(z),{class:"bg-stone-50 border-b border-stone-200"},{default:o(()=>[a(t(B),{class:"text-sm font-bold uppercase tracking-wider flex items-center gap-2"},{default:o(()=>[a(t(S),{class:"w-4 h-4"}),s[5]||(s[5]=m(" Total Penggunaan ",-1))]),_:1})]),_:1}),a(t(b),{class:"p-6"},{default:o(()=>[e("div",J,c(x(i.value.totalSize)),1),e("p",O,"Tersebar di "+c(i.value.totalCount)+" file",1),e("div",Z,[(l(!0),u(p,null,y(i.value.categories,(n,d)=>(l(),u("div",{key:d},[e("div",ee,[e("span",null,c(n.name),1),e("span",null,c(x(n.size)),1)]),e("div",se,[e("div",{class:w([C(d),"h-full transition-all duration-1000"]),style:N({width:`${n.size/(i.value.totalSize||1)*100}%`})},null,6)])]))),128))])]),_:1})]),_:1}),e("div",te,[(l(!0),u(p,null,y(i.value.categories,(n,d)=>(l(),h(t(f),{key:d,class:"hover:border-stone-800 transition-colors"},{default:o(()=>[a(t(b),{class:"p-6 flex items-center gap-4"},{default:o(()=>[e("div",{class:w(["w-12 h-12 flex items-center justify-center border-2 border-stone-800 shadow-brutal-sm text-white",C(d)])},[(l(),h(E(D(d)),{class:"w-6 h-6"}))],2),e("div",ae,[e("h3",oe,c(n.name),1),e("div",re,[e("span",ne,c(x(n.size)),1),e("span",le,c(n.count)+" File",1)])]),a(t(k),{variant:"ghost",size:"icon",class:"rounded-none hover:bg-stone-100"},{default:o(()=>[a(t(H),{class:"w-5 h-5"})]),_:1})]),_:2},1024)]),_:2},1024))),128)),a(t(f),{class:"bg-amber-50 border-dashed border-2 border-amber-300"},{default:o(()=>[a(t(b),{class:"p-6 flex items-center gap-4"},{default:o(()=>[e("div",ie,[a(t(F),{class:"w-8 h-8"})]),s[6]||(s[6]=e("div",null,[e("h3",{class:"font-bold text-amber-900 uppercase text-xs mb-1"},"Tips Efisiensi"),e("p",{class:"text-xs text-amber-800 leading-tight"},"Gunakan format WebP untuk gambar dan kompresi H.264 untuk video agar hemat ruang.")],-1))]),_:1})]),_:1})])]),a(t(f),{class:"border-2 border-stone-800"},{default:o(()=>[a(t(z),{class:"bg-lime-50 border-b-2 border-stone-800"},{default:o(()=>[a(t(B),{class:"text-sm font-bold uppercase tracking-widest"},{default:o(()=>[...s[7]||(s[7]=[m("Detail Lokasi Penyimpanan",-1)])]),_:1})]),_:1}),a(t(b),{class:"p-6"},{default:o(()=>[e("div",de,[(l(!0),u(p,null,y(i.value.categories,(n,d)=>(l(),u("div",{key:d,class:"font-mono text-[11px]"},[e("div",ce,"Direktori "+c(d),1),e("div",ue," /var/www/html/.../uploads/"+c(n.name),1)]))),128))])]),_:1})]),_:1})],64)):(l(),h(t(f),{key:2,class:"min-h-[200px] flex items-center justify-center bg-red-50 border-red-200"},{default:o(()=>[e("div",me,[a(t(F),{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),s[9]||(s[9]=e("h3",{class:"text-lg font-bold text-red-900 uppercase"},"Gagal Memuat Data",-1)),s[10]||(s[10]=e("p",{class:"text-red-700 mb-4"},"Terjadi kesalahan saat mencoba mengakses sistem file server.",-1)),a(t(k),{variant:"outline",onClick:_,class:"border-red-300 hover:bg-red-100 uppercase font-bold text-xs"},{default:o(()=>[...s[8]||(s[8]=[m("Coba Lagi",-1)])]),_:1})])]),_:1}))])}}};export{ve as default};

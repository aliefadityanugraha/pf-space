import{y as P,g as l,h as t,a as s,w as r,r as d,k as a,ah as C,U as L,E as v,B as w,aj as R,n as x,C as h,ax as k,l as g,c as S,L as A,az as N,T,o,t as U}from"./index-B3sYDdxE.js";import{A as j}from"./arrow-left-Dd9aRUBn.js";const q={class:"min-h-screen bg-brand-cream flex flex-col items-center justify-center px-4 py-12"},D={key:0,class:"text-center py-8"},$={class:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4"},z={key:0,class:"p-3 bg-red-500/10 border border-red-500/20 rounded text-red-400 text-sm text-center"},E={class:"relative"},F={class:"relative"},K={key:1},M={key:0},G={class:"mt-8 text-xs text-stone-600 font-body uppercase tracking-wide"},J={__name:"ResetPassword",setup(Y){const y=P(),_=T(),V=y.query.token,n=d(""),u=d(""),c=d(!1),i=d(""),m=d(!1),B=async()=>{if(!(!n.value||!u.value)){if(n.value!==u.value){i.value="Password tidak sama";return}c.value=!0,i.value="";try{await U.post("/api/auth/reset-password",{token:V,password:n.value}),m.value=!0,setTimeout(()=>{_.push("/auth/login")},3e3)}catch(b){i.value=b.message||"Gagal mereset password. Token mungkin sudah kadaluarsa."}finally{c.value=!1}}};return(b,e)=>{const f=L("router-link");return o(),l("div",q,[t(N,{title:"Reset Password",subtitle:"Buat password baru anda"},{footer:r(()=>[m.value?x("",!0):(o(),l("div",M,[t(f,{to:"/auth/login",class:"text-sm text-amber-500 font-body hover:text-amber-400 inline-flex items-center gap-2"},{default:r(()=>[t(a(j),{class:"w-4 h-4"}),e[7]||(e[7]=w(" Kembali ke Login ",-1))]),_:1})]))]),default:r(()=>[m.value?(o(),l("div",D,[s("div",$,[t(a(C),{class:"w-8 h-8 text-green-500"})]),e[3]||(e[3]=s("h2",{class:"text-xl font-display text-white mb-2"},"Password Berhasil Direset",-1)),e[4]||(e[4]=s("p",{class:"text-stone-400 font-body mb-6"}," Anda akan dialihkan ke halaman login dalam beberapa detik... ",-1)),t(f,{to:"/auth/login"},{default:r(()=>[t(a(v),{variant:"outline",class:"bg-stone-900 border-stone-700 text-white hover:bg-stone-800"},{default:r(()=>[...e[2]||(e[2]=[w(" Login Sekarang ",-1)])]),_:1})]),_:1})])):(o(),l("form",{key:1,onSubmit:R(B,["prevent"]),class:"space-y-6"},[i.value?(o(),l("div",z,h(i.value),1)):x("",!0),s("div",null,[e[5]||(e[5]=s("label",{class:"block text-white font-body mb-2"},"Password Baru",-1)),s("div",E,[t(a(k),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-stone-400"}),t(a(g),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=p=>n.value=p),type:"password",placeholder:"Minimal 8 karakter",class:"pl-12 bg-stone-800 border-stone-700 text-white placeholder:text-stone-500",required:"",minlength:"8"},null,8,["modelValue"])])]),s("div",null,[e[6]||(e[6]=s("label",{class:"block text-white font-body mb-2"},"Konfirmasi Password",-1)),s("div",F,[t(a(k),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-stone-400"}),t(a(g),{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=p=>u.value=p),type:"password",placeholder:"Ulangi password baru",class:"pl-12 bg-stone-800 border-stone-700 text-white placeholder:text-stone-500",required:""},null,8,["modelValue"])])]),t(a(v),{variant:"destructive",class:"w-full",size:"lg",type:"submit",disabled:c.value},{default:r(()=>[c.value?(o(),S(a(A),{key:0,class:"w-5 h-5 mr-2 animate-spin"})):(o(),l("span",K,"Reset Password"))]),_:1},8,["disabled"])],32))]),_:1}),s("p",G," Â© "+h(new Date().getFullYear())+" PF Space Repository. All rights reserved. ",1)])}}};export{J as default};

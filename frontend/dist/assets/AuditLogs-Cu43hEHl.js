import{_ as C}from"./PageHeader-CXGgszjw.js";import{e as A,J as M,f as $,g as p,a as e,h as s,w as r,B as u,a0 as E,k as a,A as f,E as _,r as m,aX as D,D as g,aH as F,aK as B,aL as I,z as P,L as R,F as h,q as T,C as n,ao as V,Q as j,G as z,t as N,o as c,c as S,aM as H,N as J,V as O,a8 as U}from"./index-CdiZ0yiz.js";import{C as q}from"./clock-BRDTloS5.js";const v=A("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),G={class:"p-4 md:p-8"},K={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},Q={class:"flex items-center justify-between"},W={key:0,class:"p-12 text-center"},X={key:1,class:"p-12 text-center text-stone-500"},Y={class:"overflow-x-auto"},Z={class:"w-full text-left border-collapse"},ee={class:"divide-y divide-stone-200"},te={class:"px-6 py-4 whitespace-nowrap border-r border-stone-100"},se={class:"flex items-center gap-2 text-xs font-mono"},ae={class:"px-6 py-4 border-r border-stone-100"},oe={class:"flex items-center gap-2"},re={class:"w-6 h-6 bg-stone-200 border border-stone-800 flex items-center justify-center text-[10px] font-bold"},ne={class:"text-[13px] font-bold truncate max-w-[120px]"},ie={class:"text-[10px] text-stone-500 font-mono"},de={class:"px-6 py-4 border-r border-stone-100"},le={class:"px-6 py-4 border-r border-stone-100"},ce={class:"flex items-center gap-2 text-[13px]"},pe={class:"font-medium uppercase text-[11px] text-stone-500"},ue={class:"font-mono text-stone-400 text-[10px]"},be={class:"px-6 py-4"},xe={class:"text-[11px] bg-stone-100 p-2 border border-stone-200 rounded font-mono text-stone-600 max-w-md overflow-hidden"},_e={class:"p-4 bg-stone-50 border-t-2 border-stone-800 flex items-center justify-between"},me={class:"text-[10px] font-bold uppercase text-stone-500"},fe={class:"flex gap-2"},ge={__name:"AuditLogs",setup(he){const l=m(!0),b=m([]),i=m({page:1,totalPages:1}),x=async(d=1)=>{l.value=!0;try{const t=await N.get(`/api/admin/logs?page=${d}`);t?.success&&(b.value=t.data,i.value=t.pagination)}catch(t){console.error("Failed to fetch audit logs:",t)}finally{l.value=!1}},y=d=>{switch(d){case"DELETE_FILM":return"bg-red-100 text-red-700 border-red-200";case"UPDATE_ROLE":return"bg-blue-100 text-blue-700 border-blue-200";case"APPROVE_FILM":return"bg-green-100 text-green-700 border-green-200";case"REJECT_FILM":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-stone-100 text-stone-700 border-stone-200"}},w=d=>{switch(d){case"film":return U;case"user":return O;case"category":return J;default:return v}},k=d=>new Date(d).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return $(()=>{x()}),(d,t)=>{const L=E("router-link");return c(),p("div",G,[e("nav",K,[s(L,{to:"/admin",class:"text-brand-teal hover:underline"},{default:r(()=>[...t[3]||(t[3]=[u("Administrasi",-1)])]),_:1}),t[5]||(t[5]=e("span",{class:"text-stone-400"},"/",-1)),s(a(f),{variant:"outline",class:"bg-purple-100 text-purple-700 border-purple-300"},{default:r(()=>[...t[4]||(t[4]=[u("Log Audit",-1)])]),_:1})]),s(C,{title:"Log Audit Admin",description:"Pantau riwayat aksi penting yang dilakukan oleh administrator.",icon:a(F),"icon-color":"bg-purple-600"},{actions:r(()=>[s(a(_),{variant:"outline",class:"gap-2",onClick:t[0]||(t[0]=o=>x(1)),disabled:l.value},{default:r(()=>[s(a(D),{class:g(["w-4 h-4",l.value?"animate-spin":""])},null,8,["class"]),t[6]||(t[6]=u(" Refresh ",-1))]),_:1},8,["disabled"])]),_:1},8,["icon"]),s(a(z),{class:"border-2 border-stone-800 shadow-brutal overflow-hidden"},{default:r(()=>[s(a(B),{class:"bg-stone-50 border-b-2 border-stone-800 py-4"},{default:r(()=>[e("div",Q,[s(a(I),{class:"text-sm font-bold uppercase tracking-widest flex items-center gap-2"},{default:r(()=>[s(a(v),{class:"w-4 h-4"}),t[7]||(t[7]=u(" Daftar Aktivitas ",-1))]),_:1})])]),_:1}),s(a(P),{class:"p-0"},{default:r(()=>[l.value&&b.value.length===0?(c(),p("div",W,[s(a(R),{class:"w-12 h-12 animate-spin text-brand-teal mx-auto mb-4"}),t[8]||(t[8]=e("p",{class:"font-mono text-stone-500 uppercase tracking-widest"},"Memuat Log...",-1))])):b.value.length===0?(c(),p("div",X," Belum ada log aktivitas yang tercatat. ")):(c(),p(h,{key:2},[e("div",Y,[e("table",Z,[t[10]||(t[10]=e("thead",{class:"bg-lime-50 border-b-2 border-stone-800 text-[10px] uppercase font-black tracking-tighter"},[e("tr",null,[e("th",{class:"px-6 py-3 border-r border-stone-800"},"Waktu"),e("th",{class:"px-6 py-3 border-r border-stone-800"},"Admin"),e("th",{class:"px-6 py-3 border-r border-stone-800"},"Aksi"),e("th",{class:"px-6 py-3 border-r border-stone-800"},"Target"),e("th",{class:"px-6 py-3"},"Rincian")])],-1)),e("tbody",ee,[(c(!0),p(h,null,T(b.value,o=>(c(),p("tr",{key:o.id,class:"hover:bg-stone-50 transition-colors group"},[e("td",te,[e("div",se,[s(a(q),{class:"w-3 h-3 text-stone-400"}),u(" "+n(k(o.created_at)),1)])]),e("td",ae,[e("div",oe,[e("div",re,n(o.user?.name?.charAt(0)||"?"),1),e("div",null,[e("p",ne,n(o.user?.name||"Sistem"),1),e("p",ie,n(o.ip_address||"0.0.0.0"),1)])])]),e("td",de,[s(a(f),{class:g([y(o.action),"text-[10px] font-bold uppercase py-0.5"]),variant:"outline"},{default:r(()=>[u(n(o.action.replace("_"," ")),1)]),_:2},1032,["class"])]),e("td",le,[e("div",ce,[(c(),S(H(w(o.target_type)),{class:"w-3.5 h-3.5 text-stone-400"})),e("span",pe,n(o.target_type),1),t[9]||(t[9]=e("span",{class:"text-stone-300"},"#",-1)),e("span",ue,n(o.target_id?.substring(0,8)),1)])]),e("td",be,[e("div",xe,n(o.details),1)])]))),128))])])]),e("div",_e,[e("span",me," Halaman "+n(i.value.page)+" dari "+n(i.value.totalPages),1),e("div",fe,[s(a(_),{variant:"outline",size:"sm",disabled:i.value.page===1||l.value,onClick:t[1]||(t[1]=o=>x(i.value.page-1)),class:"h-8 border-2 border-stone-800 shadow-brutal-xs"},{default:r(()=>[s(a(V),{class:"w-4 h-4"})]),_:1},8,["disabled"]),s(a(_),{variant:"outline",size:"sm",disabled:i.value.page===i.value.totalPages||l.value,onClick:t[2]||(t[2]=o=>x(i.value.page+1)),class:"h-8 border-2 border-stone-800 shadow-brutal-xs"},{default:r(()=>[s(a(j),{class:"w-4 h-4"})]),_:1},8,["disabled"])])])],64))]),_:1})]),_:1})])}}},ke=M(ge,[["__scopeId","data-v-79a070a0"]]);export{ke as default};

import{A as j,D as A}from"./SidebarAdmin-CEF-rlVh.js";import{_ as T}from"./PageHeader-07zs1qkm.js";import{e as L,f as V,g as u,h as t,a as e,r as k,c as w,w as o,B as m,U as P,k as a,A as G,E as y,aM as I,D as f,L as U,F as b,aA as B,aB as F,z as x,C as c,q as C,G as g,t as E,o as l,as as H,aC as N,ae as R,V as q}from"./index-C2TftA0i.js";import{C as S}from"./circle-alert-B2itqBbY.js";import{I as K}from"./image-BPu5znze.js";import{F as W}from"./file-text-DOlpqagG.js";import{V as J}from"./video-B7BDuHmV.js";import"./shield-DurntpCx.js";import"./settings-Bt2UVO6U.js";const D=L("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),O={class:"min-h-screen bg-stone-100"},Q={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},X={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},Z={class:"text-5xl font-black text-stone-900 mb-2"},ee={class:"text-stone-500 text-sm mb-6 uppercase font-bold"},se={class:"space-y-4"},te={class:"flex items-center justify-between text-xs font-bold uppercase mb-1"},ae={class:"w-full h-3 bg-stone-200 border border-stone-800 overflow-hidden"},oe={class:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4"},re={class:"flex-1"},ne={class:"font-bold uppercase tracking-wide text-sm"},le={class:"flex items-baseline gap-2"},ie={class:"text-2xl font-black"},de={class:"text-xs text-stone-500 uppercase font-bold"},ce={class:"w-12 h-12 flex items-center justify-center bg-amber-100 text-amber-700"},ue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},me={class:"font-bold text-stone-400 mb-1 uppercase tracking-tighter"},pe={class:"bg-stone-900 text-lime-400 p-2 border border-stone-700"},ge={class:"text-center p-8"},Me={__name:"StorageManager",setup(fe){const M=k(!1),p=k(!0),i=k(null),v=n=>{if(!n)return"0 B";const s=1024,h=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(n)/Math.log(s));return parseFloat((n/Math.pow(s,r)).toFixed(2))+" "+h[r]},$=n=>{switch(n){case"videos":return J;case"documents":return W;case"images":return K;case"avatars":return q;default:return D}},z=n=>{switch(n){case"videos":return"bg-purple-500";case"documents":return"bg-blue-500";case"images":return"bg-green-500";case"avatars":return"bg-orange-500";default:return"bg-stone-500"}},_=async()=>{p.value=!0;try{const n=await E.get("/api/admin/storage");n?.success&&(i.value=n.data)}catch(n){console.error("Failed to fetch storage stats:",n)}finally{p.value=!1}};return V(()=>{_()}),(n,s)=>{const h=P("router-link");return l(),u("div",O,[t(j,{"onUpdate:collapsed":s[0]||(s[0]=r=>M.value=r)}),e("main",{class:f(["p-4 md:p-8 transition-all duration-300",M.value?"ml-14":"ml-56"])},[e("nav",Q,[t(h,{to:"/admin",class:"text-brand-teal hover:underline"},{default:o(()=>[...s[1]||(s[1]=[m("Administrasi",-1)])]),_:1}),s[3]||(s[3]=e("span",{class:"text-stone-400"},"/",-1)),t(a(G),{variant:"outline",class:"bg-blue-100 text-blue-700 border-blue-300"},{default:o(()=>[...s[2]||(s[2]=[m("File Manager",-1)])]),_:1})]),t(T,{title:"Manajemen Penyimpanan",description:"Pantau penggunaan ruang disk untuk video, dokumen, dan aset lainnya.",icon:a(A),"icon-color":"bg-blue-600"},{actions:o(()=>[t(a(y),{variant:"outline",class:"gap-2",onClick:_,disabled:p.value},{default:o(()=>[t(a(I),{class:f(["w-4 h-4",p.value?"animate-spin":""])},null,8,["class"]),s[4]||(s[4]=m(" Refresh ",-1))]),_:1},8,["disabled"])]),_:1},8,["icon"]),p.value&&!i.value?(l(),u("div",X,[t(a(U),{class:"w-12 h-12 animate-spin text-brand-teal mb-4"}),s[5]||(s[5]=e("p",{class:"text-stone-500 font-mono uppercase tracking-widest"},"Menghitung Ukuran File...",-1))])):i.value?(l(),u(b,{key:1},[e("div",Y,[t(a(g),{class:"lg:col-span-1 border-2 border-stone-800 shadow-brutal"},{default:o(()=>[t(a(B),{class:"bg-stone-50 border-b border-stone-200"},{default:o(()=>[t(a(F),{class:"text-sm font-bold uppercase tracking-wider flex items-center gap-2"},{default:o(()=>[t(a(D),{class:"w-4 h-4"}),s[6]||(s[6]=m(" Total Penggunaan ",-1))]),_:1})]),_:1}),t(a(x),{class:"p-6"},{default:o(()=>[e("div",Z,c(v(i.value.totalSize)),1),e("p",ee,"Tersebar di "+c(i.value.totalCount)+" file",1),e("div",se,[(l(!0),u(b,null,C(i.value.categories,(r,d)=>(l(),u("div",{key:d},[e("div",te,[e("span",null,c(r.name),1),e("span",null,c(v(r.size)),1)]),e("div",ae,[e("div",{class:f([z(d),"h-full transition-all duration-1000"]),style:H({width:`${r.size/(i.value.totalSize||1)*100}%`})},null,6)])]))),128))])]),_:1})]),_:1}),e("div",oe,[(l(!0),u(b,null,C(i.value.categories,(r,d)=>(l(),w(a(g),{key:d,class:"hover:border-stone-800 transition-colors"},{default:o(()=>[t(a(x),{class:"p-6 flex items-center gap-4"},{default:o(()=>[e("div",{class:f(["w-12 h-12 flex items-center justify-center border-2 border-stone-800 shadow-brutal-sm text-white",z(d)])},[(l(),w(N($(d)),{class:"w-6 h-6"}))],2),e("div",re,[e("h3",ne,c(r.name),1),e("div",le,[e("span",ie,c(v(r.size)),1),e("span",de,c(r.count)+" File",1)])]),t(a(y),{variant:"ghost",size:"icon",class:"rounded-none hover:bg-stone-100"},{default:o(()=>[t(a(R),{class:"w-5 h-5"})]),_:1})]),_:2},1024)]),_:2},1024))),128)),t(a(g),{class:"bg-amber-50 border-dashed border-2 border-amber-300"},{default:o(()=>[t(a(x),{class:"p-6 flex items-center gap-4"},{default:o(()=>[e("div",ce,[t(a(S),{class:"w-8 h-8"})]),s[7]||(s[7]=e("div",null,[e("h3",{class:"font-bold text-amber-900 uppercase text-xs mb-1"},"Tips Efisiensi"),e("p",{class:"text-xs text-amber-800 leading-tight"},"Gunakan format WebP untuk gambar dan kompresi H.264 untuk video agar hemat ruang.")],-1))]),_:1})]),_:1})])]),t(a(g),{class:"border-2 border-stone-800"},{default:o(()=>[t(a(B),{class:"bg-lime-50 border-b-2 border-stone-800"},{default:o(()=>[t(a(F),{class:"text-sm font-bold uppercase tracking-widest"},{default:o(()=>[...s[8]||(s[8]=[m("Detail Lokasi Penyimpanan",-1)])]),_:1})]),_:1}),t(a(x),{class:"p-6"},{default:o(()=>[e("div",ue,[(l(!0),u(b,null,C(i.value.categories,(r,d)=>(l(),u("div",{key:d,class:"font-mono text-[11px]"},[e("div",me,"Direktori "+c(d),1),e("div",pe," /var/www/html/.../uploads/"+c(r.name),1)]))),128))])]),_:1})]),_:1})],64)):(l(),w(a(g),{key:2,class:"min-h-[200px] flex items-center justify-center bg-red-50 border-red-200"},{default:o(()=>[e("div",ge,[t(a(S),{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),s[10]||(s[10]=e("h3",{class:"text-lg font-bold text-red-900 uppercase"},"Gagal Memuat Data",-1)),s[11]||(s[11]=e("p",{class:"text-red-700 mb-4"},"Terjadi kesalahan saat mencoba mengakses sistem file server.",-1)),t(a(y),{variant:"outline",onClick:_,class:"border-red-300 hover:bg-red-100 uppercase font-bold text-xs"},{default:o(()=>[...s[9]||(s[9]=[m("Coba Lagi",-1)])]),_:1})])]),_:1}))],2)])}}};export{Me as default};

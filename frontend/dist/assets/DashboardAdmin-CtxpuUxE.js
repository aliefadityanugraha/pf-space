import{A as F}from"./SidebarAdmin-CWAsh_N7.js";import{_ as L}from"./PageHeader-BBmoHa1i.js";import{e as b,f as B,g as p,h as o,a as s,r as g,w as n,B as r,U as N,k as a,A as T,E as h,ar as $,at as V,L as P,F as f,q as _,aA as z,aB as S,z as y,G as k,ae as R,D as v,t as q,R as I,o as l,c as u,C as i,aC as w,n as C,aw as K}from"./index-BxwcQe4P.js";import{U as E}from"./users-Arnfiu1g.js";import{C as G}from"./clock-kuSOozNo.js";import"./shield-CK5Zw1ZZ.js";import"./file-text-CJb4XlM0.js";import"./settings-Jx4B4zzZ.js";const H=b("file-down",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);const J=b("file-pen",[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]]);const O=b("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Q=b("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]),W={class:"min-h-screen bg-stone-100"},X={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},Y={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},Z={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-8"},ee={class:"flex items-center justify-between mb-2"},se={class:"text-xs font-bold uppercase tracking-wider text-stone-600 border-b-2 border-pink-700 pb-1"},te={class:"text-4xl font-bold text-stone-800 mt-4"},ae={class:"flex items-center gap-2 mt-2"},oe={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},ne={class:"flex items-center gap-3"},le={class:"md:col-span-4 flex items-center gap-3"},ie={class:"font-bold uppercase text-sm"},re={class:"md:col-span-4"},de={class:"text-sm"},ce={key:0,class:"text-xs text-stone-500 ml-1"},pe={class:"md:col-span-2"},ue={class:"md:col-span-2 flex md:justify-end"},me={class:"flex items-center justify-between"},ge={class:"flex items-start gap-3"},he={class:"w-8 h-8 bg-stone-200 border-2 border-stone-800 flex items-center justify-center text-xs font-bold"},fe={class:"flex-1 min-w-0"},ve={class:"text-sm"},be={class:"font-bold"},xe={class:"text-stone-600"},_e={class:"font-medium"},ye={class:"text-xs text-stone-500 mt-1"},De={__name:"DashboardAdmin",setup(ke){const M=g(!1),x=g(!0),c=g([{label:"Total Karya",value:"0",change:"0",changeType:"positive",icon:I},{label:"User Aktif",value:"0",change:"0",changeType:"positive",icon:E},{label:"Total Kategori",value:"0",change:"0",changeType:"positive",icon:O},{label:"Karya Menunggu",value:"0",change:"0",changeType:"negative",icon:G}]),A=g([]),j=g([]),D=async()=>{x.value=!0;try{const m=await q.get("/api/admin/stats");if(m?.success){const e=m.data;c.value[0].value=(e.totalFilms||0).toString(),c.value[0].change="+"+(e.newFilms||0),c.value[1].value=(e.totalUsers||0).toString(),c.value[1].change="+"+(e.newUsers||0),c.value[2].value=(e.totalCategories||0).toString(),c.value[2].change="+"+(e.newCategories||0),c.value[3].value=(e.pendingFilms||0).toString(),c.value[3].change="0",A.value=(e.recentPendingFilms||[]).map(d=>({id:d.film_id,name:"Review Karya",subject:d.judul,subjectNote:`by ${d.creator?.name||"Unknown"}`,status:"Pending",statusColor:"bg-amber-100",icon:J,iconBg:"bg-blue-100",iconColor:"text-blue-900",action:"Review",actionPrimary:!0})),j.value=e.recentActivities.map(d=>({...d,time:d.time?new Date(d.time).toLocaleDateString():"Recently"}))}}catch(m){console.error("Failed to fetch dashboard stats:",m)}finally{x.value=!1}};return B(()=>{D()}),(m,e)=>{const d=N("router-link");return l(),p("div",W,[o(F,{"onUpdate:collapsed":e[0]||(e[0]=t=>M.value=t)}),s("main",{class:v(["p-4 md:p-8 transition-all duration-300",M.value?"ml-14":"ml-56"])},[s("nav",X,[o(d,{to:"/",class:"text-brand-teal hover:underline"},{default:n(()=>[...e[1]||(e[1]=[r("Beranda",-1)])]),_:1}),e[4]||(e[4]=s("span",{class:"text-stone-400"},"/",-1)),o(d,{to:"/admin",class:"text-stone-600 hover:underline"},{default:n(()=>[...e[2]||(e[2]=[r("Administrasi",-1)])]),_:1}),e[5]||(e[5]=s("span",{class:"text-stone-400"},"/",-1)),o(a(T),{variant:"outline",class:"bg-orange-100 text-orange-700 border-orange-300"},{default:n(()=>[...e[3]||(e[3]=[r("Dashboard",-1)])]),_:1})]),o(L,{title:"Ikhtisar Sistem",description:"Monitor statistik sistem, tugas tertunda, dan aktivitas terbaru.",icon:a(V),"icon-color":"bg-amber-500"},{actions:n(()=>[o(a(h),{variant:"outline",class:"gap-2"},{default:n(()=>[o(a($),{class:"w-4 h-4"}),e[6]||(e[6]=r(" Upload Cepat ",-1))]),_:1}),o(a(h),{variant:"outline",class:"gap-2"},{default:n(()=>[o(a(H),{class:"w-4 h-4"}),e[7]||(e[7]=r(" Laporan ",-1))]),_:1})]),_:1},8,["icon"]),x.value?(l(),p("div",Y,[o(a(P),{class:"w-12 h-12 animate-spin text-brand-teal mb-4"}),e[8]||(e[8]=s("p",{class:"text-stone-500 font-mono uppercase tracking-widest animate-pulse"},"Memuat Data...",-1))])):(l(),p(f,{key:1},[s("div",Z,[(l(!0),p(f,null,_(c.value,t=>(l(),u(a(k),{key:t.label},{default:n(()=>[o(a(y),{class:"p-6"},{default:n(()=>[s("div",ee,[s("span",se,i(t.label),1),(l(),u(w(t.icon),{class:"w-5 h-5 text-stone-400"}))]),s("div",te,i(t.value),1),s("div",ae,[t.changeType==="positive"?(l(),u(a(K),{key:0,class:"w-4 h-4 text-green-600"})):C("",!0),s("span",{class:v([t.changeType==="positive"?"text-green-600":"text-red-600","text-sm font-medium"])},i(t.change),3),e[9]||(e[9]=s("span",{class:"text-xs text-stone-500"},"vs bulan lalu",-1))])]),_:2},1024)]),_:2},1024))),128))]),s("div",oe,[o(a(k),{class:"xl:col-span-2"},{default:n(()=>[o(a(z),{class:"bg-orange-50 border-b-2 border-stone-800"},{default:n(()=>[s("div",ne,[o(a(Q),{class:"w-5 h-5"}),o(a(S),{class:"text-lg font-bold uppercase"},{default:n(()=>[...e[10]||(e[10]=[r("Tugas Aktif",-1)])]),_:1})])]),_:1}),o(a(y),{class:"p-0"},{default:n(()=>[e[11]||(e[11]=s("div",{class:"hidden md:grid grid-cols-12 gap-4 px-6 py-3 bg-lime-50 border-b-2 border-stone-800 text-xs font-bold uppercase tracking-wider"},[s("div",{class:"col-span-4"},"Nama Tugas"),s("div",{class:"col-span-4"},"Subjek"),s("div",{class:"col-span-2"},"Status"),s("div",{class:"col-span-2 text-right"},"Aksi")],-1)),(l(!0),p(f,null,_(A.value,t=>(l(),p("div",{key:t.id,class:"grid grid-cols-1 md:grid-cols-12 gap-4 px-6 py-4 items-center border-b border-stone-200 hover:bg-stone-50"},[s("div",le,[s("div",{class:v([[t.iconBg,t.iconColor],"p-2 border-2 border-stone-800 shadow-brutal-sm"])},[(l(),u(w(t.icon),{class:"w-4 h-4"}))],2),s("span",ie,i(t.name),1)]),s("div",re,[s("span",de,i(t.subject),1),t.subjectNote?(l(),p("span",ce,i(t.subjectNote),1)):C("",!0)]),s("div",pe,[o(a(T),{class:v([t.statusColor,"text-[10px] font-bold uppercase"]),variant:"outline"},{default:n(()=>[r(i(t.status),1)]),_:2},1032,["class"])]),s("div",ue,[t.actionPrimary?(l(),u(a(h),{key:0,size:"sm",class:"text-[10px] uppercase"},{default:n(()=>[r(i(t.action),1)]),_:2},1024)):(l(),u(a(h),{key:1,variant:"outline",size:"sm",class:"text-[10px] uppercase gap-1"},{default:n(()=>[t.actionIcon?(l(),u(w(t.actionIcon),{key:0,class:"w-3 h-3"})):C("",!0),r(" "+i(t.action),1)]),_:2},1024))])]))),128))]),_:1})]),_:1}),o(a(k),null,{default:n(()=>[o(a(z),{class:"bg-stone-50 border-b-2 border-stone-800"},{default:n(()=>[s("div",me,[o(a(S),{class:"text-lg font-bold uppercase"},{default:n(()=>[...e[12]||(e[12]=[r("Aktivitas Terbaru",-1)])]),_:1}),o(a(h),{variant:"ghost",size:"sm",class:"text-xs uppercase gap-1"},{default:n(()=>[e[13]||(e[13]=r(" Lihat Semua ",-1)),o(a(R),{class:"w-4 h-4"})]),_:1})])]),_:1}),o(a(y),{class:"p-0"},{default:n(()=>[(l(!0),p(f,null,_(j.value,(t,U)=>(l(),p("div",{key:U,class:"px-6 py-4 border-b border-stone-200 last:border-0"},[s("div",ge,[s("div",he,i(t.user.charAt(0)),1),s("div",fe,[s("p",ve,[s("span",be,i(t.user),1),s("span",xe,i(t.action),1),s("span",_e,i(t.target),1)]),s("p",ye,i(t.time),1)])])]))),128))]),_:1})]),_:1})])],64))],2)])}}};export{De as default};

import{A}from"./SidebarAdmin-CEF-rlVh.js";import{_ as M}from"./PageHeader-07zs1qkm.js";import{e as $,J as E,f as D,g as p,h as s,a as e,r as x,w as r,B as u,U as F,k as o,A as h,E as _,aM as B,D as f,aA as R,aB as I,z as P,L as T,F as v,q as S,C as n,ad as V,ae as j,G as z,t as U,o as c,c as N,aC as H,V as J,R as O}from"./index-C2TftA0i.js";import{S as q}from"./shield-DurntpCx.js";import{C as G}from"./clock-BR5CKG6Q.js";import{F as W}from"./file-text-DOlpqagG.js";import"./settings-Bt2UVO6U.js";const y=$("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),K={class:"min-h-screen bg-stone-100"},Q={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},X={class:"flex items-center justify-between"},Y={key:0,class:"p-12 text-center"},Z={key:1,class:"p-12 text-center text-stone-500"},ee={class:"overflow-x-auto"},te={class:"w-full text-left border-collapse"},se={class:"divide-y divide-stone-200"},ae={class:"px-6 py-4 whitespace-nowrap border-r border-stone-100"},oe={class:"flex items-center gap-2 text-xs font-mono"},re={class:"px-6 py-4 border-r border-stone-100"},ne={class:"flex items-center gap-2"},ie={class:"w-6 h-6 bg-stone-200 border border-stone-800 flex items-center justify-center text-[10px] font-bold"},de={class:"text-[13px] font-bold truncate max-w-[120px]"},le={class:"text-[10px] text-stone-500 font-mono"},ce={class:"px-6 py-4 border-r border-stone-100"},pe={class:"px-6 py-4 border-r border-stone-100"},ue={class:"flex items-center gap-2 text-[13px]"},be={class:"font-medium uppercase text-[11px] text-stone-500"},me={class:"font-mono text-stone-400 text-[10px]"},xe={class:"px-6 py-4"},_e={class:"text-[11px] bg-stone-100 p-2 border border-stone-200 rounded font-mono text-stone-600 max-w-md overflow-hidden"},fe={class:"p-4 bg-stone-50 border-t-2 border-stone-800 flex items-center justify-between"},ge={class:"text-[10px] font-bold uppercase text-stone-500"},he={class:"flex gap-2"},ve={__name:"AuditLogs",setup(ye){const g=x(!1),l=x(!0),b=x([]),i=x({page:1,totalPages:1}),m=async(d=1)=>{l.value=!0;try{const t=await U.get(`/api/admin/logs?page=${d}`);t?.success&&(b.value=t.data,i.value=t.pagination)}catch(t){console.error("Failed to fetch audit logs:",t)}finally{l.value=!1}},w=d=>{switch(d){case"DELETE_FILM":return"bg-red-100 text-red-700 border-red-200";case"UPDATE_ROLE":return"bg-blue-100 text-blue-700 border-blue-200";case"APPROVE_FILM":return"bg-green-100 text-green-700 border-green-200";case"REJECT_FILM":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-stone-100 text-stone-700 border-stone-200"}},k=d=>{switch(d){case"film":return O;case"user":return J;case"category":return W;default:return y}},C=d=>new Date(d).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return D(()=>{m()}),(d,t)=>{const L=F("router-link");return c(),p("div",K,[s(A,{"onUpdate:collapsed":t[0]||(t[0]=a=>g.value=a)}),e("main",{class:f(["p-4 md:p-8 transition-all duration-300",g.value?"ml-14":"ml-56"])},[e("nav",Q,[s(L,{to:"/admin",class:"text-brand-teal hover:underline"},{default:r(()=>[...t[4]||(t[4]=[u("Administrasi",-1)])]),_:1}),t[6]||(t[6]=e("span",{class:"text-stone-400"},"/",-1)),s(o(h),{variant:"outline",class:"bg-purple-100 text-purple-700 border-purple-300"},{default:r(()=>[...t[5]||(t[5]=[u("Log Audit",-1)])]),_:1})]),s(M,{title:"Log Audit Admin",description:"Pantau riwayat aksi penting yang dilakukan oleh administrator.",icon:o(q),"icon-color":"bg-purple-600"},{actions:r(()=>[s(o(_),{variant:"outline",class:"gap-2",onClick:t[1]||(t[1]=a=>m(1)),disabled:l.value},{default:r(()=>[s(o(B),{class:f(["w-4 h-4",l.value?"animate-spin":""])},null,8,["class"]),t[7]||(t[7]=u(" Refresh ",-1))]),_:1},8,["disabled"])]),_:1},8,["icon"]),s(o(z),{class:"border-2 border-stone-800 shadow-brutal overflow-hidden"},{default:r(()=>[s(o(R),{class:"bg-stone-50 border-b-2 border-stone-800 py-4"},{default:r(()=>[e("div",X,[s(o(I),{class:"text-sm font-bold uppercase tracking-widest flex items-center gap-2"},{default:r(()=>[s(o(y),{class:"w-4 h-4"}),t[8]||(t[8]=u(" Daftar Aktivitas ",-1))]),_:1})])]),_:1}),s(o(P),{class:"p-0"},{default:r(()=>[l.value&&b.value.length===0?(c(),p("div",Y,[s(o(T),{class:"w-12 h-12 animate-spin text-brand-teal mx-auto mb-4"}),t[9]||(t[9]=e("p",{class:"font-mono text-stone-500 uppercase tracking-widest"},"Memuat Log...",-1))])):b.value.length===0?(c(),p("div",Z," Belum ada log aktivitas yang tercatat. ")):(c(),p(v,{key:2},[e("div",ee,[e("table",te,[t[11]||(t[11]=e("thead",{class:"bg-lime-50 border-b-2 border-stone-800 text-[10px] uppercase font-black tracking-tighter"},[e("tr",null,[e("th",{class:"px-6 py-3 border-r border-stone-800"},"Waktu"),e("th",{class:"px-6 py-3 border-r border-stone-800"},"Admin"),e("th",{class:"px-6 py-3 border-r border-stone-800"},"Aksi"),e("th",{class:"px-6 py-3 border-r border-stone-800"},"Target"),e("th",{class:"px-6 py-3"},"Rincian")])],-1)),e("tbody",se,[(c(!0),p(v,null,S(b.value,a=>(c(),p("tr",{key:a.id,class:"hover:bg-stone-50 transition-colors group"},[e("td",ae,[e("div",oe,[s(o(G),{class:"w-3 h-3 text-stone-400"}),u(" "+n(C(a.created_at)),1)])]),e("td",re,[e("div",ne,[e("div",ie,n(a.user?.name?.charAt(0)||"?"),1),e("div",null,[e("p",de,n(a.user?.name||"Sistem"),1),e("p",le,n(a.ip_address||"0.0.0.0"),1)])])]),e("td",ce,[s(o(h),{class:f([w(a.action),"text-[10px] font-bold uppercase py-0.5"]),variant:"outline"},{default:r(()=>[u(n(a.action.replace("_"," ")),1)]),_:2},1032,["class"])]),e("td",pe,[e("div",ue,[(c(),N(H(k(a.target_type)),{class:"w-3.5 h-3.5 text-stone-400"})),e("span",be,n(a.target_type),1),t[10]||(t[10]=e("span",{class:"text-stone-300"},"#",-1)),e("span",me,n(a.target_id?.substring(0,8)),1)])]),e("td",xe,[e("div",_e,n(a.details),1)])]))),128))])])]),e("div",fe,[e("span",ge," Halaman "+n(i.value.page)+" dari "+n(i.value.totalPages),1),e("div",he,[s(o(_),{variant:"outline",size:"sm",disabled:i.value.page===1||l.value,onClick:t[2]||(t[2]=a=>m(i.value.page-1)),class:"h-8 border-2 border-stone-800 shadow-brutal-xs"},{default:r(()=>[s(o(V),{class:"w-4 h-4"})]),_:1},8,["disabled"]),s(o(_),{variant:"outline",size:"sm",disabled:i.value.page===i.value.totalPages||l.value,onClick:t[3]||(t[3]=a=>m(i.value.page+1)),class:"h-8 border-2 border-stone-800 shadow-brutal-xs"},{default:r(()=>[s(o(j),{class:"w-4 h-4"})]),_:1},8,["disabled"])])])],64))]),_:1})]),_:1})],2)])}}},Ee=E(ve,[["__scopeId","data-v-3b1bd750"]]);export{Ee as default};

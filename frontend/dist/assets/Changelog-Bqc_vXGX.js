import{e as v,u as M,f as F,g as l,h as n,a,i as I,j as N,k as o,S as R,r as d,l as j,m as q,v as U,n as w,L as z,p as H,F as k,q as C,s as E,t as G,x as O,y as J,o as i,c as K,w as c,z as Q,A as L,B as b,C as r,D as W,E as X,G as Y,H as Z}from"./index-JAFFUxUx.js";import{F as ee}from"./funnel-BAozgmwl.js";import{C as te}from"./calendar-hfhD-UeC.js";const ae=v("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const se=v("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const ne=v("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),oe={class:"min-h-screen flex flex-col bg-brand-cream"},ie={class:"max-w-7xl mx-auto px-4 md:px-8 py-8 md:py-12 pt-20 md:pt-25"},le={class:"mt-6 flex flex-col md:flex-row gap-3 md:gap-4"},re={class:"flex-1 relative"},de={class:"w-full md:w-56 relative"},ce={class:"mt-8 space-y-4"},ue={key:0,class:"flex items-center justify-center py-16"},me={key:1,class:"text-center py-16"},pe={class:"flex flex-col md:flex-row md:items-start justify-between gap-4"},he={class:"space-y-2 md:space-y-1.5 flex-1"},xe={class:"flex flex-wrap items-center gap-2"},fe={class:"flex items-center gap-1"},be={class:"text-[10px] md:text-sm text-stone-500 flex items-center gap-1"},ve={class:"text-lg md:text-xl font-display font-bold text-stone-900 leading-tight"},ge={class:"text-sm md:text-base text-stone-700 leading-relaxed md:leading-normal"},_e={key:0,class:"mt-4 list-disc pl-5 space-y-1.5 text-stone-700 text-xs md:text-sm"},Le={__name:"Changelog",setup(ye){M({title:"Catatan Perubahan - PF Space"});const{showToast:g}=Z(),P=J(),u=d([]),h=d(!1),S=d(""),x=d(""),m=d("all"),A={feature:"Fitur Baru",fix:"Perbaikan Bug",change:"Perubahan"},V={feature:"bg-brand-teal/20 text-brand-teal border-brand-teal/30",fix:"bg-brand-red text-white border-black",change:"bg-brand-yellow text-black border-black"},_=()=>[{id:"v1_2_0",version:"1.2.0",date:"2026-02-19",type:"feature",title:"Mode Studi",description:"Halaman Mode Studi untuk mengakses naskah, storyboard, dan RAB.",items:["Normalisasi URL dokumen menggunakan VITE_API_URL","Tombol akses dokumen dari halaman arsip"]},{id:"v1_1_3",version:"1.1.3",date:"2026-02-18",type:"fix",title:"Perbaikan Vote & Views",description:"Sinkronisasi endpoint vote dan penanganan rate-limit views.",items:["Perbaikan route vote menjadi /api/votes/:filmId","Abaikan error 429 untuk increment views"]},{id:"v1_1_0",version:"1.1.0",date:"2026-02-16",type:"change",title:"Standarisasi Aset Media",description:"Normalisasi URL video, poster, dan PDF pada beberapa halaman.",items:["ArchiveDetail, StudyMode, dan LearningAsset menyesuaikan URL absolut","Peningkatan konsistensi rendering media"]}],D=async()=>{h.value=!0,S.value="";try{const s=await G.get("/api/changelog");s&&s.success&&Array.isArray(s.data)?u.value=s.data.map((e,t)=>({id:e.id||(e.version?e.version.replaceAll(".","_"):`chg_${t}`),version:e.version||"",date:e.date||"",type:e.type||"change",title:e.title||"",description:e.description||"",items:Array.isArray(e.items)?e.items:[]})):u.value=_()}catch{u.value=_()}finally{h.value=!1,await O();const s=window.location.hash;if(s){const e=document.querySelector(s);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}}},y=H(()=>{const s=x.value.trim().toLowerCase();return[...u.value].filter(e=>{if(!(m.value==="all"||e.type===m.value))return!1;if(!s)return!0;const p=e.title.toLowerCase().includes(s),f=e.description.toLowerCase().includes(s),$=(e.items||[]).some(B=>String(B).toLowerCase().includes(s));return p||f||$}).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}),T=async s=>{const t=`${window.location.origin+P.fullPath.split("#")[0]}#${s}`;try{await navigator.clipboard.writeText(t),g("Link versi disalin")}catch{g("Gagal menyalin link","error")}};return F(D),(s,e)=>(i(),l("div",oe,[n(I),a("main",ie,[n(N,{title:"Catatan Perubahan",subtitle:"Rangkuman update, perbaikan, dan perubahan yang terjadi di PF Space.","light-text":!1}),a("div",le,[a("div",re,[n(o(R),{class:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-stone-500"}),n(o(j),{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t),placeholder:"Cari updateâ€¦",class:"pl-9 bg-white border-2 border-slate-900 shadow-brutal-xs md:shadow-brutal h-10 md:h-11 text-sm md:text-base"},null,8,["modelValue"])]),a("div",de,[n(o(ee),{class:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-stone-600"}),q(a("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),class:"w-full h-10 pl-9 pr-3 bg-white border-2 border-slate-900 shadow-brutal-xs md:shadow-brutal text-sm"},[...e[2]||(e[2]=[a("option",{value:"all"},"Semua Perubahan",-1),a("option",{value:"feature"},"Fitur Baru",-1),a("option",{value:"fix"},"Perbaikan Bug",-1),a("option",{value:"change"},"Perubahan",-1)])],512),[[U,m.value]])])]),a("div",ce,[h.value?(i(),l("div",ue,[n(o(z),{class:"w-6 h-6 animate-spin text-stone-600"})])):y.value.length===0?(i(),l("div",me,[n(o(se),{class:"w-10 h-10 mx-auto mb-3 text-stone-500"}),e[3]||(e[3]=a("p",{class:"text-stone-700 font-medium"},"Belum ada catatan perubahan yang cocok.",-1))])):w("",!0),(i(!0),l(k,null,C(y.value,t=>(i(),K(o(Y),{key:t.id,id:t.id,class:"border-2 border-black shadow-brutal bg-white"},{default:c(()=>[n(o(Q),{class:"p-4 md:p-7"},{default:c(()=>[a("div",pe,[a("div",he,[a("div",xe,[n(o(L),{variant:"secondary",class:"bg-stone-900 text-white border-0 text-[10px] md:text-xs"},{default:c(()=>[b("v"+r(t.version||"N/A"),1)]),_:2},1024),n(o(L),{class:W(["border text-[10px] md:text-xs",V[t.type]||"bg-stone-100"])},{default:c(()=>[a("span",fe,[n(o(ne),{class:"w-3 h-3 md:w-3.5 md:h-3.5"}),b(" "+r(A[t.type]||"Perubahan"),1)])]),_:2},1032,["class"]),a("span",be,[n(o(te),{class:"w-3 h-3 md:w-3.5 md:h-3.5"}),b(" "+r(new Date(t.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})),1)])]),a("h3",ve,r(t.title),1),a("p",ge,r(t.description),1)]),n(o(X),{size:"sm",variant:"outline",class:"w-full md:w-auto border-slate-900 text-stone-800 hover:bg-stone-100 shadow-brutal-xs hover:shadow-none hover:translate-x-[1px] hover:translate-y-[1px] transition-all",onClick:p=>T(t.id)},{default:c(()=>[n(o(ae),{class:"w-3.5 h-3.5 mr-1.5"}),e[4]||(e[4]=a("span",{class:"font-bold text-xs uppercase tracking-wider"},"Salin Tautan",-1))]),_:1},8,["onClick"])]),t.items&&t.items.length?(i(),l("ul",_e,[(i(!0),l(k,null,C(t.items,(p,f)=>(i(),l("li",{key:f,class:"pl-1"},r(p),1))),128))])):w("",!0)]),_:2},1024)]),_:2},1032,["id"]))),128))])]),n(E)]))}};export{Le as default};

import{_ as S}from"./PageHeader-CXGgszjw.js";import{e as v,f as F,g as p,a as s,h as o,w as n,B as r,a0 as U,k as a,A,E as g,aA as B,aC as N,r as h,L as $,F as f,q as x,aK as T,aL as z,z as _,G as y,Q as V,t as K,a8 as P,o as l,c as u,C as i,aM as k,n as w,aG as q,D as C}from"./index-CdiZ0yiz.js";import{U as I}from"./users-Dt2-TDV8.js";import{C as R}from"./clock-BRDTloS5.js";const G=v("file-down",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);const E=v("file-pen",[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]]);const H=v("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Q=v("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]),J={class:"p-4 md:p-8"},O={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},W={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},X={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-8"},Y={class:"flex items-center justify-between mb-2"},Z={class:"text-xs font-bold uppercase tracking-wider text-stone-600 border-b-2 border-pink-700 pb-1"},ee={class:"text-4xl font-bold text-stone-800 mt-4"},se={class:"flex items-center gap-2 mt-2"},te={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},ae={class:"flex items-center gap-3"},oe={class:"md:col-span-4 flex items-center gap-3"},ne={class:"font-bold uppercase text-sm"},le={class:"md:col-span-4"},ie={class:"text-sm"},re={key:0,class:"text-xs text-stone-500 ml-1"},ce={class:"md:col-span-2"},de={class:"md:col-span-2 flex md:justify-end"},pe={class:"flex items-center justify-between"},ue={class:"flex items-start gap-3"},me={class:"w-8 h-8 bg-stone-200 border-2 border-stone-800 flex items-center justify-center text-xs font-bold"},ge={class:"flex-1 min-w-0"},he={class:"text-sm"},fe={class:"font-bold"},ve={class:"text-stone-600"},be={class:"font-medium"},xe={class:"text-xs text-stone-500 mt-1"},Me={__name:"DashboardAdmin",setup(_e){const b=h(!0),d=h([{label:"Total Karya",value:"0",change:"0",changeType:"positive",icon:P},{label:"User Aktif",value:"0",change:"0",changeType:"positive",icon:I},{label:"Total Kategori",value:"0",change:"0",changeType:"positive",icon:H},{label:"Karya Menunggu",value:"0",change:"0",changeType:"negative",icon:R}]),M=h([]),j=h([]),D=async()=>{b.value=!0;try{const m=await K.get("/api/admin/stats");if(m?.success){const e=m.data;d.value[0].value=(e.totalFilms||0).toString(),d.value[0].change="+"+(e.newFilms||0),d.value[1].value=(e.totalUsers||0).toString(),d.value[1].change="+"+(e.newUsers||0),d.value[2].value=(e.totalCategories||0).toString(),d.value[2].change="+"+(e.newCategories||0),d.value[3].value=(e.pendingFilms||0).toString(),d.value[3].change="0",M.value=(e.recentPendingFilms||[]).map(c=>({id:c.film_id,name:"Review Karya",subject:c.judul,subjectNote:`by ${c.creator?.name||"Unknown"}`,status:"Pending",statusColor:"bg-amber-100",icon:E,iconBg:"bg-blue-100",iconColor:"text-blue-900",action:"Review",actionPrimary:!0})),j.value=e.recentActivities.map(c=>({...c,time:c.time?new Date(c.time).toLocaleDateString():"Recently"}))}}catch(m){console.error("Failed to fetch dashboard stats:",m)}finally{b.value=!1}};return F(()=>{D()}),(m,e)=>{const c=U("router-link");return l(),p("div",J,[s("nav",O,[o(c,{to:"/",class:"text-brand-teal hover:underline"},{default:n(()=>[...e[0]||(e[0]=[r("Beranda",-1)])]),_:1}),e[3]||(e[3]=s("span",{class:"text-stone-400"},"/",-1)),o(c,{to:"/admin",class:"text-stone-600 hover:underline"},{default:n(()=>[...e[1]||(e[1]=[r("Administrasi",-1)])]),_:1}),e[4]||(e[4]=s("span",{class:"text-stone-400"},"/",-1)),o(a(A),{variant:"outline",class:"bg-orange-100 text-orange-700 border-orange-300"},{default:n(()=>[...e[2]||(e[2]=[r("Dashboard",-1)])]),_:1})]),o(S,{title:"Ikhtisar Sistem",description:"Monitor statistik sistem, tugas tertunda, dan aktivitas terbaru.",icon:a(N),"icon-color":"bg-amber-500"},{actions:n(()=>[o(a(g),{variant:"outline",class:"gap-2"},{default:n(()=>[o(a(B),{class:"w-4 h-4"}),e[5]||(e[5]=r(" Upload Cepat ",-1))]),_:1}),o(a(g),{variant:"outline",class:"gap-2"},{default:n(()=>[o(a(G),{class:"w-4 h-4"}),e[6]||(e[6]=r(" Laporan ",-1))]),_:1})]),_:1},8,["icon"]),b.value?(l(),p("div",W,[o(a($),{class:"w-12 h-12 animate-spin text-brand-teal mb-4"}),e[7]||(e[7]=s("p",{class:"text-stone-500 font-mono uppercase tracking-widest animate-pulse"},"Memuat Data...",-1))])):(l(),p(f,{key:1},[s("div",X,[(l(!0),p(f,null,x(d.value,t=>(l(),u(a(y),{key:t.label},{default:n(()=>[o(a(_),{class:"p-6"},{default:n(()=>[s("div",Y,[s("span",Z,i(t.label),1),(l(),u(k(t.icon),{class:"w-5 h-5 text-stone-400"}))]),s("div",ee,i(t.value),1),s("div",se,[t.changeType==="positive"?(l(),u(a(q),{key:0,class:"w-4 h-4 text-green-600"})):w("",!0),s("span",{class:C([t.changeType==="positive"?"text-green-600":"text-red-600","text-sm font-medium"])},i(t.change),3),e[8]||(e[8]=s("span",{class:"text-xs text-stone-500"},"vs bulan lalu",-1))])]),_:2},1024)]),_:2},1024))),128))]),s("div",te,[o(a(y),{class:"xl:col-span-2"},{default:n(()=>[o(a(T),{class:"bg-orange-50 border-b-2 border-stone-800"},{default:n(()=>[s("div",ae,[o(a(Q),{class:"w-5 h-5"}),o(a(z),{class:"text-lg font-bold uppercase"},{default:n(()=>[...e[9]||(e[9]=[r("Tugas Aktif",-1)])]),_:1})])]),_:1}),o(a(_),{class:"p-0"},{default:n(()=>[e[10]||(e[10]=s("div",{class:"hidden md:grid grid-cols-12 gap-4 px-6 py-3 bg-lime-50 border-b-2 border-stone-800 text-xs font-bold uppercase tracking-wider"},[s("div",{class:"col-span-4"},"Nama Tugas"),s("div",{class:"col-span-4"},"Subjek"),s("div",{class:"col-span-2"},"Status"),s("div",{class:"col-span-2 text-right"},"Aksi")],-1)),(l(!0),p(f,null,x(M.value,t=>(l(),p("div",{key:t.id,class:"grid grid-cols-1 md:grid-cols-12 gap-4 px-6 py-4 items-center border-b border-stone-200 hover:bg-stone-50"},[s("div",oe,[s("div",{class:C([[t.iconBg,t.iconColor],"p-2 border-2 border-stone-800 shadow-brutal-sm"])},[(l(),u(k(t.icon),{class:"w-4 h-4"}))],2),s("span",ne,i(t.name),1)]),s("div",le,[s("span",ie,i(t.subject),1),t.subjectNote?(l(),p("span",re,i(t.subjectNote),1)):w("",!0)]),s("div",ce,[o(a(A),{class:C([t.statusColor,"text-[10px] font-bold uppercase"]),variant:"outline"},{default:n(()=>[r(i(t.status),1)]),_:2},1032,["class"])]),s("div",de,[t.actionPrimary?(l(),u(a(g),{key:0,size:"sm",class:"text-[10px] uppercase"},{default:n(()=>[r(i(t.action),1)]),_:2},1024)):(l(),u(a(g),{key:1,variant:"outline",size:"sm",class:"text-[10px] uppercase gap-1"},{default:n(()=>[t.actionIcon?(l(),u(k(t.actionIcon),{key:0,class:"w-3 h-3"})):w("",!0),r(" "+i(t.action),1)]),_:2},1024))])]))),128))]),_:1})]),_:1}),o(a(y),null,{default:n(()=>[o(a(T),{class:"bg-stone-50 border-b-2 border-stone-800"},{default:n(()=>[s("div",pe,[o(a(z),{class:"text-lg font-bold uppercase"},{default:n(()=>[...e[11]||(e[11]=[r("Aktivitas Terbaru",-1)])]),_:1}),o(a(g),{variant:"ghost",size:"sm",class:"text-xs uppercase gap-1"},{default:n(()=>[e[12]||(e[12]=r(" Lihat Semua ",-1)),o(a(V),{class:"w-4 h-4"})]),_:1})])]),_:1}),o(a(_),{class:"p-0"},{default:n(()=>[(l(!0),p(f,null,x(j.value,(t,L)=>(l(),p("div",{key:L,class:"px-6 py-4 border-b border-stone-200 last:border-0"},[s("div",ue,[s("div",me,i(t.user.charAt(0)),1),s("div",ge,[s("p",he,[s("span",fe,i(t.user),1),s("span",ve,i(t.action),1),s("span",be,i(t.target),1)]),s("p",xe,i(t.time),1)])])]))),128))]),_:1})]),_:1})])],64))])}}};export{Me as default};

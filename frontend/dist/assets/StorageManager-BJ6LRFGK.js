import{_ as D}from"./PageHeader-DFUzlPy8.js";import{e as T,f as L,g as u,a as e,h as a,c as h,w as o,B as f,a0 as V,k as t,A as N,E as k,r as M,aW as P,D as w,aX as A,L as G,F as p,aK as z,aL as B,z as x,n as I,C as l,aB as S,q as y,G as b,t as E,o as d,aM as H,Q as R,V as K,N as U}from"./index-Co7LmOIS.js";import{C as F}from"./circle-alert-pbTXBo6T.js";import{I as W}from"./image-vsr9RIVc.js";import{V as q}from"./video-DFRQCraN.js";const $=T("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Q={class:"p-4 md:p-8"},X={class:"flex items-center gap-2 text-xs font-mono uppercase tracking-wider mb-4"},J={key:0,class:"flex flex-col items-center justify-center min-h-[400px]"},O={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},Y={class:"text-5xl font-black text-stone-900 mb-2"},Z={class:"text-stone-500 text-sm mb-6 uppercase font-bold"},ee={key:0,class:"mb-6"},se={class:"flex items-center justify-between text-[11px] font-mono mb-1"},te={class:"w-full h-3 bg-stone-200 border border-stone-800 overflow-hidden"},ae={class:"mt-2 text-xs text-stone-600"},oe={class:"space-y-4"},ne={class:"flex items-center justify-between text-xs font-bold uppercase mb-1"},re={class:"w-full h-3 bg-stone-200 border border-stone-800 overflow-hidden"},le={class:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"flex-1"},de={class:"font-bold uppercase tracking-wide text-sm"},ce={class:"flex items-baseline gap-2"},ue={class:"text-2xl font-black"},me={class:"text-xs text-stone-500 uppercase font-bold"},fe={class:"w-12 h-12 flex items-center justify-center bg-amber-100 text-amber-700"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},be={class:"font-bold text-stone-400 mb-1 uppercase tracking-tighter"},pe={class:"bg-stone-900 text-lime-400 p-2 border border-stone-700"},xe={class:"text-center p-8"},Ce={__name:"StorageManager",setup(ve){const g=M(!0),n=M(null),m=r=>{if(!r)return"0 B";const s=1024,_=["B","KB","MB","GB","TB"],i=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,i)).toFixed(2))+" "+_[i]},j=r=>{switch(r){case"videos":return q;case"documents":return U;case"images":return W;case"avatars":return K;default:return $}},C=r=>{switch(r){case"videos":return"bg-purple-500";case"documents":return"bg-blue-500";case"images":return"bg-green-500";case"avatars":return"bg-orange-500";default:return"bg-stone-500"}},v=async()=>{g.value=!0;try{const r=await E.get("/api/admin/storage");r?.success&&(n.value=r.data)}catch(r){console.error("Failed to fetch storage stats:",r)}finally{g.value=!1}};return L(()=>{v()}),(r,s)=>{const _=V("router-link");return d(),u("div",Q,[e("nav",X,[a(_,{to:"/admin",class:"text-brand-teal hover:underline"},{default:o(()=>[...s[0]||(s[0]=[f("Administrasi",-1)])]),_:1}),s[2]||(s[2]=e("span",{class:"text-stone-400"},"/",-1)),a(t(N),{variant:"outline",class:"bg-blue-100 text-blue-700 border-blue-300"},{default:o(()=>[...s[1]||(s[1]=[f("File Manager",-1)])]),_:1})]),a(D,{title:"Manajemen Penyimpanan",description:"Pantau penggunaan ruang disk untuk video, dokumen, and aset lainnya.",icon:t(A),"icon-color":"bg-blue-600"},{actions:o(()=>[a(t(k),{variant:"outline",class:"gap-2",onClick:v,disabled:g.value},{default:o(()=>[a(t(P),{class:w(["w-4 h-4",g.value?"animate-spin":""])},null,8,["class"]),s[3]||(s[3]=f(" Refresh ",-1))]),_:1},8,["disabled"])]),_:1},8,["icon"]),g.value&&!n.value?(d(),u("div",J,[a(t(G),{class:"w-12 h-12 animate-spin text-brand-teal mb-4"}),s[4]||(s[4]=e("p",{class:"text-stone-500 font-mono uppercase tracking-widest"},"Menghitung Ukuran File...",-1))])):n.value?(d(),u(p,{key:1},[e("div",O,[a(t(b),{class:"lg:col-span-1 border-2 border-stone-800 shadow-brutal"},{default:o(()=>[a(t(z),{class:"bg-stone-50 border-b border-stone-200"},{default:o(()=>[a(t(B),{class:"text-sm font-bold uppercase tracking-wider flex items-center gap-2"},{default:o(()=>[a(t($),{class:"w-4 h-4"}),s[5]||(s[5]=f(" Total Penggunaan ",-1))]),_:1})]),_:1}),a(t(x),{class:"p-6"},{default:o(()=>[e("div",Y,l(m(n.value.totalSize)),1),e("p",Z,"Tersebar di "+l(n.value.totalCount)+" file",1),n.value.disk?(d(),u("div",ee,[e("div",se,[s[6]||(s[6]=e("span",null,"Terpakai",-1)),e("span",null,l(Math.round(n.value.disk.used/(n.value.disk.total||1)*100))+"%",1)]),e("div",te,[e("div",{class:"h-full bg-stone-800",style:S({width:`${n.value.disk.used/(n.value.disk.total||1)*100}%`})},null,4)]),e("div",ae,l(m(n.value.disk.used))+" dari "+l(m(n.value.disk.total))+" â€¢ Sisa "+l(m(n.value.disk.free)),1)])):I("",!0),e("div",oe,[(d(!0),u(p,null,y(n.value.categories,(i,c)=>(d(),u("div",{key:c},[e("div",ne,[e("span",null,l(i.name),1),e("span",null,l(m(i.size)),1)]),e("div",re,[e("div",{class:w([C(c),"h-full transition-all duration-1000"]),style:S({width:`${i.size/(n.value.totalSize||1)*100}%`})},null,6)])]))),128))])]),_:1})]),_:1}),e("div",le,[(d(!0),u(p,null,y(n.value.categories,(i,c)=>(d(),h(t(b),{key:c,class:"hover:border-stone-800 transition-colors"},{default:o(()=>[a(t(x),{class:"p-6 flex items-center gap-4"},{default:o(()=>[e("div",{class:w(["w-12 h-12 flex items-center justify-center border-2 border-stone-800 shadow-brutal-sm text-white",C(c)])},[(d(),h(H(j(c)),{class:"w-6 h-6"}))],2),e("div",ie,[e("h3",de,l(i.name),1),e("div",ce,[e("span",ue,l(m(i.size)),1),e("span",me,l(i.count)+" File",1)])]),a(t(k),{variant:"ghost",size:"icon",class:"rounded-none hover:bg-stone-100"},{default:o(()=>[a(t(R),{class:"w-5 h-5"})]),_:1})]),_:2},1024)]),_:2},1024))),128)),a(t(b),{class:"bg-amber-50 border-dashed border-2 border-amber-300"},{default:o(()=>[a(t(x),{class:"p-6 flex items-center gap-4"},{default:o(()=>[e("div",fe,[a(t(F),{class:"w-8 h-8"})]),s[7]||(s[7]=e("div",null,[e("h3",{class:"font-bold text-amber-900 uppercase text-xs mb-1"},"Tips Efisiensi"),e("p",{class:"text-xs text-amber-800 leading-tight"},"Gunakan format WebP untuk gambar dan kompresi H.264 untuk video agar hemat ruang.")],-1))]),_:1})]),_:1})])]),a(t(b),{class:"border-2 border-stone-800"},{default:o(()=>[a(t(z),{class:"bg-lime-50 border-b-2 border-stone-800"},{default:o(()=>[a(t(B),{class:"text-sm font-bold uppercase tracking-widest"},{default:o(()=>[...s[8]||(s[8]=[f("Detail Lokasi Penyimpanan",-1)])]),_:1})]),_:1}),a(t(x),{class:"p-6"},{default:o(()=>[e("div",ge,[(d(!0),u(p,null,y(n.value.categories,(i,c)=>(d(),u("div",{key:c,class:"font-mono text-[11px]"},[e("div",be,"Direktori "+l(c),1),e("div",pe," /var/www/html/.../uploads/"+l(i.name),1)]))),128))])]),_:1})]),_:1})],64)):(d(),h(t(b),{key:2,class:"min-h-[200px] flex items-center justify-center bg-red-50 border-red-200"},{default:o(()=>[e("div",xe,[a(t(F),{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),s[10]||(s[10]=e("h3",{class:"text-lg font-bold text-red-900 uppercase"},"Gagal Memuat Data",-1)),s[11]||(s[11]=e("p",{class:"text-red-700 mb-4"},"Terjadi kesalahan saat mencoba mengakses sistem file server.",-1)),a(t(k),{variant:"outline",onClick:v,class:"border-red-300 hover:bg-red-100 uppercase font-bold text-xs"},{default:o(()=>[...s[9]||(s[9]=[f("Coba Lagi",-1)])]),_:1})])]),_:1}))])}}};export{Ce as default};

import{e as F,c as m,o,w as n,h as e,k as t,z as $,a as s,av as i,G as C,u as T,f as K,g as c,r as x,F as k,q as g,N as L,T as N,X as V,S as E,t as v,O as G,H as z,U as H,R as J,A as R,B as y,C as _,E as w,a2 as U}from"./index-C2TftA0i.js";import{_ as X}from"./PageLayout-9L3r6HXJ.js";const q=F("bookmark-x",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m14.5 7.5-5 5",key:"3lb6iw"}],["path",{d:"m9.5 7.5 5 5",key:"ko136h"}]]),D={class:"p-5 space-y-4"},M={class:"flex justify-between items-start gap-2"},O={class:"space-y-2"},P={class:"flex gap-2"},Z={__name:"CollectionCardSkeleton",setup(S){return(h,d)=>(o(),m(t(C),{class:"bg-white border-2 border-black shadow-brutal"},{default:n(()=>[e(t($),{class:"p-0"},{default:n(()=>[e(i,{class:"aspect-video w-full border-b-2 border-black"}),s("div",D,[s("div",M,[e(i,{class:"h-6 w-3/4"}),e(i,{class:"h-4 w-10"})]),s("div",O,[e(i,{class:"h-4 w-full"}),e(i,{class:"h-4 w-5/6"})]),s("div",P,[e(i,{class:"h-10 flex-1"}),e(i,{class:"h-10 w-10"})])])]),_:1})]),_:1}))}},Q={class:"max-w-7xl mx-auto px-4 md:px-8 pb-16"},W={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"},Y={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"},I={class:"aspect-video bg-stone-200 border-b-2 border-black relative overflow-hidden"},aa=["src"],sa={key:1,class:"w-full h-full flex items-center justify-center"},ea={class:"absolute top-2 left-2 md:top-3 md:left-3"},ta={class:"p-4 md:p-5"},oa={class:"flex justify-between items-start gap-2 mb-2"},la={class:"text-lg md:text-xl font-display font-bold text-stone-900 line-clamp-1 group-hover:text-brand-red transition-colors"},ra={class:"text-[10px] md:text-xs font-mono font-bold text-stone-400"},na={class:"text-[11px] md:text-sm text-stone-500 font-body line-clamp-2 mb-4 md:mb-6"},ia={class:"flex items-center gap-2"},ma={__name:"Collections",setup(S){T({title:"Koleksi Simpanan Saya - PF Space"});const h=N(),d=x([]),f=x(!0),{showToast:b}=z(),j=async()=>{f.value=!0;try{const l=await v.get("/api/collections"),r=Array.isArray(l.data)?l.data:[];d.value=r.map(u=>{const a=u.film||{};return a.gambar_poster&&(a.gambar_poster=G(a.gambar_poster)),u.film=a,u})}catch(l){console.error("Failed to fetch collections:",l),b("Gagal memuat koleksi","error")}finally{f.value=!1}},p=x(new Set),A=async l=>{if(!p.value.has(l)){p.value.add(l);try{await v.post(`/api/collections/${l}/toggle`,{}),d.value=d.value.filter(r=>r.film_id!==l),b("Karya dihapus dari koleksi")}catch{b("Gagal menghapus karya","error")}finally{p.value.delete(l)}}};return K(j),(l,r)=>{const u=H("Loader2");return o(),m(X,null,{default:n(()=>[s("div",Q,[r[2]||(r[2]=s("div",{class:"mb-8 md:mb-10 py-6 md:py-0"},[s("div",{class:"flex items-center gap-3 mb-2"},[s("h1",{class:"text-2xl md:text-5xl font-display font-bold text-stone-900"},"Simpanan Saya")]),s("p",{class:"text-xs md:text-sm text-stone-500 font-body max-w-2xl px-1"}," Kumpulan karya favorit yang telah Anda simpan untuk ditonton kembali atau dipelajari aset pembelajarannya. ")],-1)),f.value?(o(),c("div",W,[(o(),c(k,null,g(3,a=>e(Z,{key:a})),64))])):d.value.length>0?(o(),c("div",Y,[(o(!0),c(k,null,g(d.value,a=>(o(),m(t(C),{key:a.collection_id,class:"group bg-white border-2 border-black shadow-brutal hover:translate-x-[4px] hover:translate-y-[4px] hover:shadow-brutal-sm transition-all"},{default:n(()=>[e(t($),{class:"p-0"},{default:n(()=>[s("div",I,[a.film?.gambar_poster?(o(),c("img",{key:0,src:a.film.gambar_poster,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"},null,8,aa)):(o(),c("div",sa,[e(t(J),{class:"w-10 h-10 md:w-12 md:h-12 text-stone-400"})])),s("div",ea,[e(t(R),{class:"bg-brand-red text-white border-2 border-black shadow-brutal-xs text-[9px] md:text-xs"},{default:n(()=>[y(_(a.film?.category?.nama_kategori),1)]),_:2},1024)])]),s("div",ta,[s("div",oa,[s("h3",la,_(a.film?.judul),1),s("span",ra,_(a.film?.tahun_karya),1)]),s("p",na,_(a.film?.sinopsis||"Tidak ada deskripsi."),1),s("div",ia,[e(t(w),{class:"flex-1 gap-2 shadow-brutal-xs h-9 md:h-10 text-xs md:text-sm font-bold",onClick:B=>t(h).push(`/archive/${a.film?.slug}`)},{default:n(()=>[e(t(U),{class:"w-3.5 h-3.5 md:w-4 md:h-4"}),r[1]||(r[1]=y(" Tonton ",-1))]),_:1},8,["onClick"]),e(t(w),{variant:"outline",size:"icon",class:"w-9 h-9 md:w-10 md:h-10 border-2 border-stone-200 hover:border-brand-red hover:text-brand-red transition-all",onClick:B=>A(a.film_id),disabled:p.value.has(a.film_id)},{default:n(()=>[p.value.has(a.film_id)?(o(),m(u,{key:0,class:"w-4 h-4 md:w-5 md:h-5 animate-spin"})):(o(),m(t(q),{key:1,class:"w-4 h-4 md:w-5 md:h-5"}))]),_:2},1032,["onClick","disabled"])])])]),_:2},1024)]),_:2},1024))),128))])):(o(),m(L,{key:2,icon:t(V),title:"Belum Ada Simpanan",description:"Jelajahi arsip dan klik tombol 'Simpan ke Koleksi' pada karya yang Anda sukai untuk menyimpannya di sini.","action-label":"Jelajahi Arsip",variant:"dashed",onAction:r[0]||(r[0]=a=>t(h).push("/"))},{"action-icon":n(()=>[e(t(E),{class:"w-5 h-5"})]),_:1},8,["icon"]))])]),_:1})}}};export{ma as default};

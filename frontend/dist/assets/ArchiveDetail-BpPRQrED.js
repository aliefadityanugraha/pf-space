import{e as z,g as r,o as s,a as e,Q as xe,c as x,p as T,h as d,k as n,R as H,C as u,n as p,F as M,q as K,D,P as Ke,T as O,U as E,w as g,B as j,V as oe,A as ie,E as L,L as U,W as Pe,X as Re,Y as re,Z as ve,r as y,$ as He,m as be,K as pe,a0 as ye,a1 as ze,a2 as ne,z as Oe,G as Ee,a3 as qe,u as Ne,f as Ge,a4 as ge,a5 as Ye,i as Ze,a6 as We,a7 as Y,s as Xe,t as I,O as F,H as Je,y as Qe}from"./index-Cfqo9U8-.js";import{V as et}from"./VideoPlayer-Bp3PFVcm.js";import{C as tt}from"./calendar-dqfeaM8D.js";import{F as le}from"./file-text-D4fLrFx3.js";const st=z("clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);const at=z("corner-down-right",[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);const nt=z("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const lt=z("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const ot=z("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),it={class:"pt-16 md:pt-20 bg-stone-900 min-h-[calc(100vh-30rem)]"},rt={class:"flex flex-col lg:flex-row"},dt={class:"flex-1 flex flex-col"},ct={class:"w-full bg-black"},mt={class:"aspect-video"},ut={key:1,class:"w-full h-full flex items-center justify-center bg-stone-900"},ft={class:"text-center"},ht={class:"w-20 h-20 mx-auto mb-4 rounded-full bg-stone-800 flex items-center justify-center"},gt={class:"w-full lg:w-80 xl:w-96 shrink-0 bg-stone-800/50 border-t lg:border-t-0 lg:border-l border-white/10 flex flex-col"},xt={class:"p-3 md:p-4 border-b border-white/10"},vt={class:"text-stone-500 text-[10px] md:text-xs mt-0.5 md:mt-1"},bt={class:"flex-1 overflow-y-auto p-3 space-y-2",style:{"max-height":"calc(100vh - 5rem - 5rem)"}},pt=["onClick"],yt={class:"w-24 h-[54px] md:w-32 md:h-[72px] bg-stone-700 flex-shrink-0 overflow-hidden rounded border border-white/10 relative"},wt=["src","alt"],kt={key:1,class:"w-full h-full flex items-center justify-center bg-stone-800"},$t={key:2,class:"absolute inset-0 flex items-center justify-center bg-black/40"},_t={key:3,class:"absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity"},Ct={class:"absolute top-1 left-1 w-5 h-5 bg-black/70 rounded flex items-center justify-center"},jt={class:"text-white text-[10px] font-bold"},St={class:"flex-1 min-w-0 flex flex-col justify-center"},Tt={class:"flex items-center gap-1.5 mb-0.5 md:mb-1"},Dt={key:0,class:"text-center py-10"},It={__name:"DetailVideoSection",props:{film:{type:Object,required:!0},activeVideoUrl:{type:String,default:null},activeVideoType:{type:String,default:"film"}},emits:["switch-video"],setup(t,{emit:_}){const l=t,v=_,i=T(()=>!!l.activeVideoUrl),m=T(()=>{if(!l.film)return[];const o=[];return l.film.link_video_utama&&o.push({type:"film",label:"Karya Utama",description:l.film.judul,url:l.film.link_video_utama,icon:"film"}),l.film.link_trailer&&o.push({type:"trailer",label:"Trailer",description:`Trailer - ${l.film.judul}`,url:l.film.link_trailer,icon:"clapperboard"}),l.film.link_bts&&o.push({type:"bts",label:"Di Balik Layar",description:`BTS - ${l.film.judul}`,url:l.film.link_bts,icon:"video"}),o}),w=o=>{if(!o)return null;const b=o.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\s]+)/);return b?`https://img.youtube.com/vi/${b[1]}/mqdefault.jpg`:null};return(o,b)=>(s(),r("section",it,[e("div",rt,[e("div",dt,[e("div",ct,[e("div",mt,[i.value?(s(),x(et,{key:"vp-"+t.activeVideoUrl,src:t.activeVideoUrl,title:t.film.judul||"Video",poster:t.film.gambar_poster||null,storageKey:t.film?.film_id?`film-${t.film.film_id}`:t.film?.slug?`film-${t.film.slug}`:""},null,8,["src","title","poster","storageKey"])):(s(),r("div",ut,[e("div",ft,[e("div",ht,[d(n(H),{class:"w-10 h-10 text-stone-600"})]),b[0]||(b[0]=e("p",{class:"text-stone-400 text-lg font-display mb-1"}," Video Belum Tersedia ",-1)),b[1]||(b[1]=e("p",{class:"text-stone-500 text-sm"}," Karya ini belum memiliki video yang dapat ditonton ",-1))])]))])]),xe(o.$slots,"action-bar")]),e("div",gt,[e("div",xt,[b[2]||(b[2]=e("h3",{class:"text-white font-bold text-xs md:text-sm uppercase tracking-wider"}," Daftar Video ",-1)),e("p",vt,u(m.value.length)+" video tersedia ",1)]),e("div",bt,[(s(!0),r(M,null,K(m.value,(f,h)=>(s(),r("div",{key:f.type,class:D(["flex gap-3 p-2.5 rounded-lg cursor-pointer transition-all duration-200 group",t.activeVideoType===f.type?"bg-brand-red/20 border border-brand-red/40":"hover:bg-white/5 border border-transparent"]),onClick:P=>v("switch-video",f)},[e("div",yt,[w(f.url)?(s(),r("img",{key:0,src:w(f.url),alt:f.label,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,wt)):(s(),r("div",kt,[f.icon==="film"?(s(),x(n(H),{key:0,class:"w-6 h-6 text-stone-500"})):f.icon==="clapperboard"?(s(),x(n(st),{key:1,class:"w-6 h-6 text-stone-500"})):(s(),x(n(ot),{key:2,class:"w-6 h-6 text-stone-500"}))])),t.activeVideoType===f.type?(s(),r("div",$t,[...b[3]||(b[3]=[e("div",{class:"flex items-center gap-1"},[e("div",{class:"w-0.5 h-3 bg-brand-red rounded-full animate-pulse"}),e("div",{class:"w-0.5 h-4 bg-brand-red rounded-full animate-pulse",style:{"animation-delay":"150ms"}}),e("div",{class:"w-0.5 h-2.5 bg-brand-red rounded-full animate-pulse",style:{"animation-delay":"300ms"}})],-1)])])):(s(),r("div",_t,[d(n(Ke),{class:"w-5 h-5 md:w-6 md:h-6 text-white fill-white"})])),e("div",Ct,[e("span",jt,u(h+1),1)])]),e("div",St,[e("div",Tt,[e("span",{class:D(["text-[9px] md:text-[10px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded",{"bg-brand-red/20 text-brand-red":f.type==="film","bg-brand-teal/20 text-brand-teal":f.type==="trailer","bg-brand-orange/20 text-brand-orange":f.type==="bts"}])},u(f.label),3)]),e("h4",{class:D(["text-xs md:text-sm font-medium line-clamp-2 transition-colors",t.activeVideoType===f.type?"text-white":"text-white/70 group-hover:text-white"])},u(f.description),3)])],10,pt))),128)),m.value.length===0?(s(),r("div",Dt,[d(n(H),{class:"w-10 h-10 text-stone-600 mx-auto mb-3"}),b[4]||(b[4]=e("p",{class:"text-stone-500 text-sm"},"Tidak ada video tersedia",-1))])):p("",!0)])])])]))}},Vt={class:"bg-stone-900 p-4 md:p-5 border-t border-white/5"},Lt={class:"flex flex-col md:flex-row md:items-start md:justify-between gap-3 mb-3"},Bt={class:"flex-1 min-w-0"},At={class:"text-base sm:text-lg md:text-xl font-display font-bold text-white mb-1 truncate"},Ft={class:"flex flex-wrap items-center gap-3 text-sm text-stone-400"},Mt={key:1,class:"flex items-center gap-1.5"},Ut={key:2,class:"flex items-center gap-1.5"},Kt={class:"flex flex-wrap items-center gap-1.5 md:gap-2"},Pt={__name:"DetailActionBar",props:{film:{type:Object,required:!0},voteData:{type:Object,required:!0},voting:{type:Boolean,default:!1},isInCollection:{type:Boolean,default:!1},processingCollection:{type:Boolean,default:!1},hasLearningAssets:{type:Boolean,default:!1}},emits:["toggle-vote","toggle-collection","share","share-to"],setup(t,{emit:_}){const l=_,v=O();return(i,m)=>{const w=E("router-link");return s(),r("div",Vt,[e("div",Lt,[e("div",Bt,[e("h2",At,u(t.film.judul),1),e("div",Ft,[t.film.creator?.id?(s(),x(w,{key:0,to:`/creator/${t.film.creator.id}`,class:"flex items-center gap-1.5 hover:text-brand-orange transition-colors"},{default:g(()=>[d(n(oe),{class:"w-3.5 h-3.5"}),j(" "+u(t.film.creator?.name||"Tidak diketahui"),1)]),_:1},8,["to"])):(s(),r("span",Mt,[d(n(oe),{class:"w-3.5 h-3.5"}),j(" "+u(t.film.creator?.name||"Tidak diketahui"),1)])),t.film.tahun_karya?(s(),r("span",Ut,[d(n(tt),{class:"w-3.5 h-3.5"}),j(" "+u(t.film.tahun_karya),1)])):p("",!0),t.film.category?(s(),x(n(ie),{key:3,variant:"secondary",class:"bg-white/10 text-stone-300 border-0 text-xs"},{default:g(()=>[j(u(t.film.category.nama_kategori),1)]),_:1})):p("",!0)])]),e("div",Kt,[t.hasLearningAssets?(s(),x(n(L),{key:0,variant:"outline",size:"sm",class:"h-8 md:h-9 text-[10px] md:text-xs bg-brand-teal/20 text-brand-teal border-brand-teal/30 hover:bg-brand-teal/30 hover:text-brand-teal px-2 md:px-3",onClick:m[0]||(m[0]=o=>n(v).push(`/archive/${t.film.slug}/study`))},{default:g(()=>[d(n(nt),{class:"w-3.5 h-3.5 mr-1"}),m[6]||(m[6]=e("span",{class:"sm:inline"},"Mode Studi",-1))]),_:1})):p("",!0),d(n(L),{variant:t.voteData.has_voted?"default":"outline",size:"sm",class:D(["h-8 md:h-9 text-[10px] md:text-xs px-2 md:px-3",t.voteData.has_voted?"bg-pink-600 hover:bg-pink-700 border-pink-600 text-white":"border-white/20 text-white/80 hover:bg-white/10 hover:text-white"]),onClick:m[1]||(m[1]=o=>l("toggle-vote")),disabled:t.voting},{default:g(()=>[t.voting?(s(),x(n(U),{key:0,class:"w-3.5 h-3.5 mr-1 animate-spin"})):(s(),x(n(Pe),{key:1,class:D(["w-3.5 h-3.5 mr-1",t.voteData.has_voted?"fill-current":""])},null,8,["class"])),j(" "+u(t.voteData.vote_count)+" Vote ",1)]),_:1},8,["variant","class","disabled"]),d(n(L),{variant:"outline",size:"sm",class:D(["h-8 md:h-9 text-[10px] md:text-xs px-2 md:px-3 border-white/20 text-white/80 hover:bg-white/10 hover:text-white",t.isInCollection?"border-brand-orange text-brand-orange":""]),onClick:m[2]||(m[2]=o=>l("toggle-collection")),disabled:t.processingCollection},{default:g(()=>[t.processingCollection?(s(),x(n(U),{key:0,class:"w-3.5 h-3.5 mr-1 animate-spin"})):(s(),x(n(Re),{key:1,class:D(["w-3.5 h-3.5 mr-1",t.isInCollection?"fill-current":""])},null,8,["class"])),j(" "+u(t.isInCollection?"Tersimpan":"Simpan"),1)]),_:1},8,["class","disabled"]),d(n(L),{variant:"outline",size:"sm",class:"h-8 md:h-9 text-[10px] md:text-xs px-2 md:px-3 border-white/20 text-white/80 hover:bg-white/10 hover:text-white",onClick:m[3]||(m[3]=o=>l("share"))},{default:g(()=>[d(n(lt),{class:"w-3.5 h-3.5 mr-1"}),m[7]||(m[7]=j(" Bagikan ",-1))]),_:1}),d(n(L),{variant:"outline",size:"sm",class:"h-8 md:h-9 bg-[#25D366]/20 text-[#25D366] border-[#25D366]/30 hover:bg-[#25D366]/30 px-2",onClick:m[4]||(m[4]=o=>l("share-to","whatsapp")),title:"Bagikan ke WhatsApp"},{default:g(()=>[d(n(re),{class:"w-3.5 h-3.5"})]),_:1}),d(n(L),{variant:"outline",size:"sm",class:"h-8 md:h-9 bg-white/10 text-white border-white/20 hover:bg-white/20 px-2",onClick:m[5]||(m[5]=o=>l("share-to","twitter")),title:"Bagikan ke X"},{default:g(()=>[...m[8]||(m[8]=[e("svg",{viewBox:"0 0 24 24",class:"w-3 h-3 fill-current","aria-hidden":"true"},[e("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})],-1)])]),_:1})])])])}}},Rt={class:"mb-12"},Ht={class:"flex items-start gap-3 mb-4 md:mb-6"},zt={class:"text-lg md:text-3xl font-display font-semibold text-stone-800"},Ot={class:"text-sm md:text-base text-justify font-body text-stone-700 leading-normal md:leading-8"},Z={__name:"ContentSection",props:{title:{type:String,required:!0},color:{type:String,default:"red"}},setup(t){const _={red:"bg-red-500",teal:"bg-teal-600"};return(l,v)=>(s(),r("div",Rt,[e("div",Ht,[e("div",{class:D(["w-1.5 h-6 md:h-8 rounded-sm mt-0.5 md:mt-1",_[t.color]||_.red])},null,2),e("h2",zt,u(t.title),1)]),e("div",Ot,[xe(l.$slots,"default")])]))}},Et={key:0,class:"absolute -left-6 md:-left-10 top-0 bottom-0 border-l-2 border-stone-200"},qt={class:"flex gap-3 md:gap-4"},Nt={class:"w-9 h-9 md:w-10 md:h-10 rounded-full border-2 border-slate-900 shadow-brutal-xs flex items-center justify-center text-xs md:text-sm font-bold flex-shrink-0 overflow-hidden bg-stone-100 relative"},Gt=["src","alt"],Yt={class:"flex-1 min-w-0"},Zt={class:"flex items-center flex-wrap gap-2 mb-1"},Wt={class:"font-display font-bold text-[13px] md:text-sm text-stone-900 capitalize tracking-tight"},Xt={class:"text-[9px] md:text-xs text-stone-400 font-mono font-medium"},Jt={class:"text-[12px] md:text-[14px] text-stone-700 leading-normal md:leading-relaxed whitespace-pre-wrap mb-2 font-body"},Qt={class:"flex items-center gap-5"},es=["disabled"],ts={key:0,class:"mt-4 p-3 md:p-4 bg-white border-2 border-slate-900 shadow-brutal-xs md:shadow-brutal relative overflow-hidden"},ss={class:"flex justify-end"},as={key:0},ns={__name:"CommentItem",props:{comment:{type:Object,required:!0},depth:{type:Number,default:0},maxDepth:{type:Number,default:5},isLoggedIn:{type:Boolean,default:!1},currentUser:{type:Object,default:()=>({})},canModerate:{type:Boolean,default:!1},deletingCommentIds:{type:Object,default:()=>new Set}},emits:["reply","delete"],setup(t,{emit:_}){const l=t,v=_,i=y(!1),m=y(""),w=y(!1),o=async()=>{if(m.value.trim()){w.value=!0;try{v("reply",{parent_id:l.comment.diskusi_id,isi_pesan:m.value.trim()}),m.value="",i.value=!1}finally{w.value=!1}}},b=T(()=>!l.isLoggedIn||!l.currentUser||!l.comment?!1:!!(l.currentUser.id&&l.comment.user_id&&l.currentUser.id===l.comment.user_id||l.canModerate));return(f,h)=>{const P=E("CommentItem",!0);return s(),r("div",{class:D(["comment-item relative group",t.depth>0?"mt-3 ml-6 md:ml-10":"mt-2 border-b-2 border-stone-50 pb-3 last:border-0 last:pb-0"])},[t.depth>0?(s(),r("div",Et,[...h[5]||(h[5]=[e("div",{class:"absolute top-5 left-0 w-4 md:w-8 border-t-2 border-stone-200"},null,-1)])])):p("",!0),e("div",qt,[e("div",Nt,[t.comment.user?.image?(s(),r("img",{key:0,src:t.comment.user.image,alt:t.comment.user.name,class:"w-full h-full object-cover"},null,8,Gt)):(s(),r("div",{key:1,class:D(["w-full h-full flex items-center justify-center",t.depth%2===0?"bg-brand-orange text-stone-900":"bg-brand-teal text-white"])},u(t.comment.user?.name?.charAt(0)||"U"),3))]),e("div",Yt,[e("div",Zt,[e("span",Wt,u(t.comment.user?.name||"Pengguna tidak dikenal"),1),e("span",Xt,u(n(ve)(t.comment.created_at,!0)),1)]),e("p",Jt,u(t.comment.isi_pesan),1),e("div",Qt,[t.isLoggedIn&&t.depth<t.maxDepth?(s(),r("button",{key:0,onClick:h[0]||(h[0]=V=>i.value=!i.value),class:"group/btn flex items-center gap-1.5 text-[10px] md:text-xs font-bold uppercase tracking-widest text-stone-400 hover:text-brand-teal transition-colors"},[d(n(at),{class:"w-3.5 h-3.5 group-hover/btn:translate-x-0.5 transition-transform"}),e("span",null,u(i.value?"Batal":"Balas"),1)])):p("",!0),b.value?(s(),r("button",{key:1,onClick:h[1]||(h[1]=V=>v("delete",t.comment.diskusi_id)),disabled:t.deletingCommentIds.has(t.comment.diskusi_id),class:"group/btn flex items-center gap-1.5 text-[10px] md:text-xs font-bold uppercase tracking-widest text-stone-400 hover:text-brand-red transition-colors disabled:opacity-50"},[t.deletingCommentIds.has(t.comment.diskusi_id)?(s(),x(n(U),{key:0,class:"w-3.5 h-3.5 animate-spin"})):(s(),x(n(He),{key:1,class:"w-3.5 h-3.5 group-hover/btn:scale-110 transition-transform"})),e("span",null,u(t.deletingCommentIds.has(t.comment.diskusi_id)?"Menghapus...":"Hapus"),1)],8,es)):p("",!0)]),d(ze,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0"},{default:g(()=>[i.value?(s(),r("div",ts,[h[7]||(h[7]=e("div",{class:"absolute top-0 left-0 w-1 md:w-1.5 h-full bg-brand-teal"},null,-1)),be(e("textarea",{"onUpdate:modelValue":h[2]||(h[2]=V=>m.value=V),rows:"2",placeholder:"Tulis balasan...",class:"w-full p-2 md:p-3 border-2 border-slate-900 bg-stone-50 text-xs md:text-sm resize-none focus:bg-white focus:ring-0 focus:outline-none mb-2 font-body transition-colors"},null,512),[[pe,m.value]]),e("div",ss,[d(n(L),{size:"sm",class:"bg-brand-teal hover:bg-brand-teal/90 text-white rounded-none border-2 border-slate-900 shadow-brutal-xs hover:shadow-none hover:translate-x-[1px] hover:translate-y-[1px] transition-all font-bold uppercase tracking-wider h-8 md:h-9",onClick:o,disabled:!m.value.trim()||w.value},{default:g(()=>[w.value?(s(),x(n(U),{key:0,class:"w-3 h-3 animate-spin mr-2"})):(s(),x(n(ye),{key:1,class:"w-3 h-3 mr-2"})),h[6]||(h[6]=j(" Kirim Balasan ",-1))]),_:1},8,["disabled"])])])):p("",!0)]),_:1}),t.comment.replies&&t.comment.replies.length>0?(s(),r("div",as,[(s(!0),r(M,null,K(t.comment.replies,V=>(s(),x(P,{key:V.diskusi_id,comment:V,depth:t.depth+1,"max-depth":t.maxDepth,"is-logged-in":t.isLoggedIn,"current-user":t.currentUser,"can-moderate":t.canModerate,"deleting-comment-ids":t.deletingCommentIds,onReply:h[3]||(h[3]=S=>f.$emit("reply",S)),onDelete:h[4]||(h[4]=S=>f.$emit("delete",S))},null,8,["comment","depth","max-depth","is-logged-in","current-user","can-moderate","deleting-comment-ids"]))),128))])):p("",!0)])])],2)}}},ls={class:"lg:col-span-2 space-y-8 animate-fade-in-up",style:{"animation-delay":"200ms",opacity:"0","animation-fill-mode":"forwards"}},os={class:"flex flex-col sm:flex-row gap-6"},is={class:"w-full max-w-[180px] mx-auto sm:mx-0 shrink-0"},rs={class:"aspect-[3/4] bg-stone-800 border-2 border-slate-900 overflow-hidden shadow-brutal-sm"},ds=["src","alt"],cs={key:1,class:"w-full h-full flex items-center justify-center"},ms={class:"flex-1 min-w-0"},us={class:"text-xl md:text-3xl font-display font-bold text-stone-900 mb-2 md:mb-3 break-words"},fs={class:"flex flex-wrap items-center gap-2 text-sm font-body text-stone-600 mb-4"},hs={key:1,class:"truncate"},gs={class:"text-sm md:text-base text-stone-600 break-words leading-normal md:leading-relaxed"},xs=["innerHTML"],vs={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bs={class:"font-bold text-sm text-stone-900"},ps={class:"text-sm text-stone-600"},ys={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ws={class:"p-3 bg-stone-100 rounded"},ks={class:"text-sm text-stone-600"},$s={class:"p-3 bg-stone-100 rounded"},_s={class:"text-sm text-stone-600"},Cs={class:"flex items-center gap-2 mb-4"},js={class:"text-sm text-stone-500 font-bold font-mono tracking-tight uppercase"},Ss={key:0,class:"mb-6 p-3 md:p-4 bg-white border-2 border-slate-900 shadow-brutal relative"},Ts={class:"flex gap-3 md:gap-4"},Ds={class:"w-9 h-9 md:w-10 md:h-10 bg-brand-orange border-2 border-slate-900 shadow-brutal-xs flex items-center justify-center text-stone-900 font-bold flex-shrink-0 rounded-full overflow-hidden"},Is=["src"],Vs={key:1},Ls={class:"flex-1 min-w-0"},Bs={class:"flex justify-end"},As={key:1,class:"mb-8 p-4 md:p-6 bg-stone-100 border-2 border-dashed border-stone-400 text-center"},Fs={class:"space-y-6"},Ms={key:0,class:"text-center py-8"},Us={key:1,class:"text-center py-8 bg-stone-100 rounded border-2 border-stone-200 border-dashed"},Ks={key:2,class:"space-y-6"},Ps={__name:"DetailContent",props:{film:{type:Object,required:!0},parsedSections:{type:Array,default:()=>[]},comments:{type:Array,default:()=>[]},loadingComments:{type:Boolean,default:!1},newComment:{type:String,default:""},submittingComment:{type:Boolean,default:!1},isLoggedIn:{type:Boolean,default:!1},user:{type:Object,default:null},canModerate:{type:Boolean,default:!1},totalCommentCount:{type:Number,default:0},deletingCommentIds:{type:Object,default:()=>new Set}},emits:["update:newComment","submit-comment","delete-comment"],setup(t,{emit:_}){const l=t,v=_,i=O(),m=T({get:()=>l.newComment,set:w=>v("update:newComment",w)});return(w,o)=>{const b=E("router-link");return s(),r("div",ls,[e("div",os,[e("div",is,[e("div",rs,[t.film.gambar_poster?(s(),r("img",{key:0,src:t.film.gambar_poster,alt:t.film.judul,class:"w-full h-full object-cover"},null,8,ds)):(s(),r("div",cs,[d(n(H),{class:"w-12 h-12 text-stone-600"})]))])]),e("div",ms,[e("h2",us,u(t.film.judul),1),e("div",fs,[d(n(oe),{class:"w-4 h-4 shrink-0"}),t.film.creator?.id?(s(),x(b,{key:0,to:`/creator/${t.film.creator.id}`,class:"hover:text-brand-red hover:underline font-medium truncate"},{default:g(()=>[j(u(t.film.creator?.name||"Tidak diketahui"),1)]),_:1},8,["to"])):(s(),r("span",hs,u(t.film.creator?.name||"Tidak diketahui"),1)),d(n(ie),{variant:"default",class:"bg-stone-800 shrink-0"},{default:g(()=>[j(u(t.film.tahun_karya||"-"),1)]),_:1}),t.film.category?(s(),x(n(ie),{key:2,variant:"outline",class:"bg-white shrink-0"},{default:g(()=>[j(u(t.film.category.nama_kategori),1)]),_:1})):p("",!0)]),o[5]||(o[5]=e("h3",{class:"font-display font-semibold text-stone-900 text-lg mb-2"},"Sinopsis",-1)),e("p",gs,u(t.film.sinopsis||"Tidak ada sinopsis."),1)])]),t.film.deskripsi_lengkap?(s(!0),r(M,{key:0},K(t.parsedSections,(f,h)=>(s(),x(Z,{key:h,title:f.title,color:"red"},{default:g(()=>[e("div",{class:"prose prose-sm max-w-none font-body",innerHTML:f.content},null,8,xs)]),_:2},1032,["title"]))),128)):p("",!0),d(Z,{title:"Kru & Pemeran",color:"red"},{default:g(()=>[t.film.crew&&t.film.crew.length>0?(s(),r("div",vs,[(s(!0),r(M,null,K(t.film.crew,(f,h)=>(s(),r("div",{key:h,class:"p-3 bg-stone-100 rounded"},[e("p",bs,u(f.jabatan),1),e("p",ps,u(f.anggota?.join(", ")),1)]))),128))])):(s(),r("div",ys,[e("div",ws,[o[6]||(o[6]=e("p",{class:"font-bold text-sm text-stone-900"},"Sutradara",-1)),e("p",ks,u(t.film.creator?.name||"Tidak diketahui"),1)]),e("div",$s,[o[7]||(o[7]=e("p",{class:"font-bold text-sm text-stone-900"},"Produser",-1)),e("p",_s,u(t.film.creator?.name||"Tidak diketahui"),1)]),o[8]||(o[8]=e("div",{class:"p-3 bg-stone-100 rounded"},[e("p",{class:"font-bold text-sm text-stone-900"},"Penata Sinematografi"),e("p",{class:"text-sm text-stone-600"},"-")],-1)),o[9]||(o[9]=e("div",{class:"p-3 bg-stone-100 rounded"},[e("p",{class:"font-bold text-sm text-stone-900"},"Penyunting"),e("p",{class:"text-sm text-stone-600"},"-")],-1))]))]),_:1}),d(Z,{title:"Diskusi",color:"red"},{default:g(()=>[e("div",Cs,[d(n(re),{class:"w-5 h-5 shrink-0"}),e("span",js,u(t.totalCommentCount)+" KOMENTAR",1)]),t.isLoggedIn?(s(),r("div",Ss,[o[12]||(o[12]=e("div",{class:"absolute top-2 right-2 flex gap-1"},[e("div",{class:"w-1.5 h-1.5 bg-stone-200 rounded-full"}),e("div",{class:"w-1.5 h-1.5 bg-stone-200 rounded-full"})],-1)),e("div",Ts,[e("div",Ds,[t.user?.image?(s(),r("img",{key:0,src:t.user.image,class:"w-full h-full object-cover"},null,8,Is)):(s(),r("span",Vs,u(t.user?.name?.charAt(0)||"U"),1))]),e("div",Ls,[be(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=f=>m.value=f),rows:"2",placeholder:"Apa pendapatmu tentang karya ini?",class:"w-full p-2 md:p-3 border-2 border-slate-900 bg-stone-50 text-sm md:text-base resize-none focus:bg-white focus:ring-0 focus:outline-none mb-3 font-body transition-colors"},null,512),[[pe,m.value]]),e("div",Bs,[d(n(L),{onClick:o[1]||(o[1]=f=>v("submit-comment")),disabled:t.submittingComment||!m.value.trim(),class:"bg-brand-red hover:bg-brand-red/90 text-white rounded-none border-2 border-slate-900 shadow-brutal-sm md:shadow-brutal hover:shadow-none hover:translate-x-[1px] md:hover:translate-x-[2px] hover:translate-y-[1px] md:hover:translate-y-[2px] active:translate-x-[2px] active:translate-y-[2px] transition-all font-bold uppercase tracking-wider h-9 md:h-10 px-5"},{default:g(()=>[t.submittingComment?(s(),x(n(U),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(s(),x(n(ye),{key:1,class:"w-4 h-4 mr-2"})),o[10]||(o[10]=e("span",{class:"hidden sm:inline"},"Kirim Komentar",-1)),o[11]||(o[11]=e("span",{class:"sm:hidden"},"Kirim",-1))]),_:1},8,["disabled"])])])])])):(s(),r("div",As,[o[14]||(o[14]=e("p",{class:"text-stone-600 mb-4 font-body text-sm md:text-base"}," Bergabung dalam diskusi untuk memberikan apresiasi atau masukan. ",-1)),d(n(L),{variant:"outline",class:"border-2 border-stone-800 shadow-brutal-xs text-sm",onClick:o[2]||(o[2]=f=>n(i).push("/auth/login"))},{default:g(()=>[...o[13]||(o[13]=[j("Login Untuk Berkomentar",-1)])]),_:1})])),e("div",Fs,[t.loadingComments?(s(),r("div",Ms,[d(n(U),{class:"w-8 h-8 animate-spin mx-auto text-stone-400"})])):t.comments.length===0?(s(),r("div",Us,[d(n(re),{class:"w-12 h-12 text-stone-300 mx-auto mb-2"}),o[15]||(o[15]=e("p",{class:"text-stone-500 font-body text-sm md:text-base"}," Belum ada diskusi. Jadilah yang pertama berkomentar! ",-1))])):(s(),r("div",Ks,[(s(!0),r(M,null,K(t.comments,f=>(s(),x(ns,{key:f.diskusi_id,comment:f,"is-logged-in":t.isLoggedIn,"current-user":t.user,"can-moderate":t.canModerate,"deleting-comment-ids":t.deletingCommentIds,onReply:o[3]||(o[3]=h=>v("submit-comment",h)),onDelete:o[4]||(o[4]=h=>v("delete-comment",h))},null,8,["comment","is-logged-in","current-user","can-moderate","deleting-comment-ids"]))),128))]))])]),_:1})])}}},Rs={class:"lg:col-span-1 space-y-6 animate-fade-in-up",style:{"animation-delay":"400ms",opacity:"0","animation-fill-mode":"forwards"}},Hs={class:"space-y-3"},zs={class:"flex items-center gap-2.5 md:gap-3 min-w-0 flex-1"},Os={class:"flex items-center gap-2.5 md:gap-3 min-w-0 flex-1"},Es={class:"flex items-center gap-2.5 md:gap-3 min-w-0 flex-1"},qs={key:3,class:"text-sm text-stone-400 text-center py-4"},Ns={class:"space-y-2.5 md:space-y-3 text-xs md:text-sm"},Gs={class:"flex justify-between gap-4"},Ys={class:"font-medium text-right truncate"},Zs={class:"flex justify-between gap-4"},Ws={class:"font-medium text-right"},Xs={class:"flex justify-between gap-4"},Js={class:"font-medium text-right truncate"},Qs={class:"flex justify-between gap-4"},ea={class:"font-medium text-right"},ta={__name:"DetailSidebar",props:{film:{type:Object,required:!0}},setup(t){return O(),(_,l)=>{const v=E("router-link");return s(),r("div",Rs,[d(Z,{title:"Aset Pembelajaran",color:"teal"},{default:g(()=>[e("div",Hs,[t.film.file_naskah?(s(),x(v,{key:0,to:{name:"AssetDetail",params:{archiveSlug:t.film.slug,assetSlug:"naskah-film"}},class:"flex items-center justify-between p-2.5 md:p-3 bg-stone-100 hover:bg-stone-200 transition-colors group"},{default:g(()=>[e("div",zs,[d(n(le),{class:"w-4 h-4 md:w-5 md:h-5 text-brand-red shrink-0"}),l[0]||(l[0]=e("div",{class:"min-w-0 flex-1"},[e("span",{class:"font-medium text-xs md:text-sm block truncate"},"Naskah Karya"),e("span",{class:"text-[10px] md:text-xs text-stone-500"},"PDF")],-1))]),d(n(ne),{class:"w-3.5 h-3.5 md:w-4 md:h-4 text-stone-400 group-hover:text-brand-red transition-colors shrink-0 ml-2"})]),_:1},8,["to"])):p("",!0),t.film.file_storyboard?(s(),x(v,{key:1,to:{name:"AssetDetail",params:{archiveSlug:t.film.slug,assetSlug:"storyboard"}},class:"flex items-center justify-between p-2.5 md:p-3 bg-stone-100 hover:bg-stone-200 transition-colors group"},{default:g(()=>[e("div",Os,[d(n(le),{class:"w-4 h-4 md:w-5 md:h-5 text-brand-teal shrink-0"}),l[1]||(l[1]=e("div",{class:"min-w-0 flex-1"},[e("span",{class:"font-medium text-xs md:text-sm block truncate"},"Storyboard"),e("span",{class:"text-[10px] md:text-xs text-stone-500"},"PDF")],-1))]),d(n(ne),{class:"w-3.5 h-3.5 md:w-4 md:h-4 text-stone-400 group-hover:text-brand-teal transition-colors shrink-0 ml-2"})]),_:1},8,["to"])):p("",!0),t.film.file_rab?(s(),x(v,{key:2,to:{name:"AssetDetail",params:{archiveSlug:t.film.slug,assetSlug:"rab"}},class:"flex items-center justify-between p-2.5 md:p-3 bg-stone-100 hover:bg-stone-200 transition-colors group"},{default:g(()=>[e("div",Es,[d(n(le),{class:"w-4 h-4 md:w-5 md:h-5 text-brand-orange shrink-0"}),l[2]||(l[2]=e("div",{class:"min-w-0 flex-1"},[e("span",{class:"font-medium text-xs md:text-sm block truncate"},"RAB (Anggaran)"),e("span",{class:"text-[10px] md:text-xs text-stone-500"},"PDF")],-1))]),d(n(ne),{class:"w-3.5 h-3.5 md:w-4 md:h-4 text-stone-400 group-hover:text-brand-orange transition-colors shrink-0 ml-2"})]),_:1},8,["to"])):p("",!0),!t.film.file_naskah&&!t.film.file_storyboard&&!t.film.file_rab?(s(),r("p",qs," Tidak ada dokumen ")):p("",!0)])]),_:1}),d(n(Ee),null,{default:g(()=>[d(n(Oe),{class:"p-3 md:p-4"},{default:g(()=>[l[7]||(l[7]=e("h3",{class:"font-bold mb-3 md:mb-4 text-sm md:text-base"},"Informasi Karya",-1)),e("div",Ns,[e("div",Gs,[l[3]||(l[3]=e("span",{class:"text-stone-500 shrink-0"},"Kategori",-1)),e("span",Ys,u(t.film.category?.nama_kategori||"-"),1)]),e("div",Zs,[l[4]||(l[4]=e("span",{class:"text-stone-500 shrink-0"},"Tahun",-1)),e("span",Ws,u(t.film.tahun_karya||"-"),1)]),e("div",Xs,[l[5]||(l[5]=e("span",{class:"text-stone-500 shrink-0"},"Pembuat",-1)),e("span",Js,u(t.film.creator?.name||"-"),1)]),e("div",Qs,[l[6]||(l[6]=e("span",{class:"text-stone-500 shrink-0"},"Dipublikasi",-1)),e("span",ea,u(n(ve)(t.film.created_at)),1)])])]),_:1})]),_:1})])}}},sa={key:0,class:"my-12 animate-fade-in-up",style:{"animation-delay":"500ms",opacity:"0","animation-fill-mode":"forwards"}},aa={class:"text-2xl font-black font-display text-stone-900 mb-6 uppercase tracking-wider flex items-center gap-2"},na={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"},la={class:"font-bold text-sm text-stone-900 line-clamp-1 mb-0.5"},oa={class:"text-xs text-stone-500 mb-0 flex items-center gap-1"},ia={__name:"DetailRelatedFilms",props:{relatedFilms:{type:Array,default:()=>[]}},setup(t){const _=O();return(l,v)=>t.relatedFilms.length>0?(s(),r("div",sa,[e("h2",aa,[d(n(H),{class:"w-6 h-6 text-brand-orange"}),v[0]||(v[0]=j(" Karya Serupa ",-1))]),e("div",na,[(s(!0),r(M,null,K(t.relatedFilms,i=>(s(),x(qe,{key:i.film_id,archive:i,variant:"portrait","content-class":"p-3",class:"cursor-pointer",onClick:m=>n(_).push(`/archive/${i.slug}`)},{content:g(()=>[e("h3",la,u(i.judul),1),e("p",oa,u(i.creator?.name),1)]),_:2},1032,["archive","onClick"]))),128))])])):p("",!0)}},ra={class:"min-h-screen flex flex-col bg-brand-cream"},da={key:0,class:"min-h-screen flex items-center justify-center pt-14"},ca={key:0,class:"w-full bg-stone-900 border-b border-white/10 py-3 px-4 md:px-8"},ma={class:"max-w-7xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-3"},ua={class:"flex items-center gap-3"},fa={key:0,class:"text-xs text-stone-400 mt-1 italic font-medium"},ha={key:1,class:"text-[9px] md:text-xs text-stone-500 mt-0.5"},ga={class:"flex gap-2"},xa={class:"w-full max-w-7xl mx-auto px-4 md:px-8 py-10"},va={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12"},ka={__name:"ArchiveDetail",setup(t){const _=Qe(),l=O(),v=T(()=>_.params.slug||_.params.id),i=y(null),m=y(!0),w=y(null),o=y(!0),b=()=>{if(w.value){const a=w.value.$el?.offsetHeight||w.value.offsetHeight||500;o.value=window.scrollY<a-80}else o.value=window.scrollY<400};Ne({title:()=>i.value?`${i.value.judul} - PF Space`:"Memuat Karya...",meta:[{name:"description",content:()=>i.value?.sinopsis||"Detail arsip karya."},{property:"og:title",content:()=>i.value?.judul},{property:"og:description",content:()=>i.value?.sinopsis},{property:"og:image",content:()=>i.value?.gambar_poster},{name:"twitter:card",content:"summary_large_image"}]});const{user:f,isLoggedIn:h,isAdmin:P,isModerator:V}=We(),{showToast:S}=Je(),we=T(()=>P.value||V.value),W=y(null),X=y("film"),ke=a=>{W.value=a.url,X.value=a.type},C=T(()=>i.value?.film_id),J=y({vote_count:0,has_voted:!1}),Q=y(!1),$e=async()=>{if(C.value)try{const c=(await I.get(`/api/votes/${C.value}`)).data||{};J.value={vote_count:c.vote_count??0,has_voted:typeof c.has_voted<"u"?!!c.has_voted:!!c.voted}}catch(a){console.error("Failed to fetch votes:",a)}},_e=async()=>{if(!h.value){l.push("/auth/login");return}if(C.value){Q.value=!0;try{const a=await I.post(`/api/votes/${C.value}/toggle`,{});J.value={vote_count:a.data.vote_count,has_voted:a.data.voted}}catch(a){console.error("Failed to vote:",a)}finally{Q.value=!1}}},B=y({isInCollection:!1,processing:!1}),Ce=T(()=>B.value.isInCollection),je=T(()=>B.value.processing),Se=async()=>{if(!(!C.value||!h.value))try{const a=await I.get(`/api/collections/${C.value}/status`);B.value.isInCollection=a.data?.is_in_collection||!1}catch(a){console.error("Failed to fetch collection status:",a)}},Te=async()=>{if(!h.value){l.push("/auth/login");return}if(!C.value)return;const a=B.value.isInCollection;B.value.processing=!0;try{const k=(await I.post(`/api/collections/${C.value}/toggle`,{})).data;let $=!a;k&&typeof k.is_in_collection=="boolean"&&($=k.is_in_collection),B.value.isInCollection=$,S($?"Ditambahkan ke koleksi":"Dihapus dari koleksi")}catch(c){B.value.isInCollection=a,S(c.message||"Gagal mengubah koleksi","error")}finally{B.value.processing=!1}},De=async()=>{const a={title:i.value?.judul||"PF Space Archive",text:`Lihat karya ${i.value?.judul} di PF Space`,url:window.location.href};try{navigator.share?await navigator.share(a):(await navigator.clipboard.writeText(window.location.href),S("Link berhasil disalin!"))}catch(c){if(c.name!=="AbortError"){console.error("Error sharing:",c);try{await navigator.clipboard.writeText(window.location.href),S("Link berhasil disalin!")}catch{S("Gagal membagikan","error")}}}},Ie=a=>{const c=encodeURIComponent(window.location.href),k=encodeURIComponent(`Lihat karya ${i.value?.judul} di PF Space`),$={whatsapp:`https://wa.me/?text=${k}%20${c}`,twitter:`https://twitter.com/intent/tweet?text=${k}&url=${c}`};$[a]&&window.open($[a],"_blank","noopener,noreferrer")},ee=y([]),te=y(!1),q=y(""),se=y(!1),ae=async()=>{if(C.value){te.value=!0;try{const a=await I.get(`/api/discussions/film/${C.value}`);ee.value=a.data||[]}catch(a){console.error("Failed to fetch comments:",a)}finally{te.value=!1}}},Ve=async(a=null)=>{const c=!!a&&!!a.parent_id,k=c?a.isi_pesan:q.value.trim(),$=c?a.parent_id:null;if(!(!k||!h.value||!C.value)){se.value=!c;try{await I.post(`/api/discussions/film/${C.value}`,{isi_pesan:k,parent_id:$}),c||(q.value=""),await ae(),S(c?"Balasan terkirim":"Komentar terkirim")}catch(R){console.error("Failed to submit comment:",R),S(R.message||"Gagal mengirim komentar","error")}finally{se.value=!1}}},N=y(new Set),Le=async a=>{if(!N.value.has(a)&&confirm("Hapus komentar ini? Semua balasan juga akan terhapus.")){N.value.add(a);try{await I.delete(`/api/discussions/${a}`),await ae(),S("Komentar berhasil dihapus")}catch(c){console.error("Failed to delete comment:",c),S("Gagal menghapus komentar","error")}finally{N.value.delete(a)}}},Be=T(()=>{let a=0;const c=k=>{a+=k.length,k.forEach($=>{$.replies&&$.replies.length>0&&c($.replies)})};return c(ee.value),a}),Ae=T(()=>!!(i.value?.file_naskah||i.value?.file_storyboard||i.value?.file_rab)||P.value||V.value||f.value&&f.value.id===i.value?.user_id),Fe=T(()=>{if(!i.value?.deskripsi_lengkap)return[];const a=i.value.deskripsi_lengkap,k=new DOMParser().parseFromString(a,"text/html"),$=Array.from(k.body.childNodes),R=[];let fe="Eksplorasi Karya",G=[];const he=()=>{if(G.length>0){const A=document.createElement("div");G.forEach(Ue=>A.appendChild(Ue.cloneNode(!0))),A.innerHTML.trim()&&R.push({title:fe,content:A.innerHTML})}};return $.forEach(A=>{A.nodeType===1&&A.tagName==="H2"?(he(),fe=A.textContent||"Section",G=[]):G.push(A)}),he(),R}),de=y([]),ce=y(!1),Me=async()=>{if(C.value){ce.value=!0;try{const a=await I.get(`/api/films/${C.value}/related?limit=6`);de.value=a.data||[]}catch(a){console.error("Failed to fetch related films:",a)}finally{ce.value=!1}}},me=async()=>{if(!v.value){l.push("/");return}m.value=!0;try{const c=(await I.get(`/api/films/${v.value}`)).data||{};c.gambar_poster=F(c.gambar_poster),c.link_video_utama=F(c.link_video_utama),c.link_trailer=F(c.link_trailer),c.link_bts=F(c.link_bts),c.file_naskah=F(c.file_naskah),c.file_storyboard=F(c.file_storyboard),c.file_rab=F(c.file_rab),i.value=c,W.value=i.value?.link_video_utama||null,X.value="film",$e(),Se(),ae(),Me()}catch(a){console.error("Failed to fetch film:",a),l.push("/")}finally{m.value=!1}},ue=async()=>{if(v.value)try{await I.post(`/api/films/${v.value}/views`)}catch(a){if(a?.status===429)return;console.warn("Increment views skipped:",a?.message||a)}};return Ge(()=>{me(),ue(),window.addEventListener("scroll",b),b()}),ge(v,a=>{a&&(me(),ue(),window.scrollTo(0,0),b())}),ge(i,a=>{a&&setTimeout(b,200)}),Ye(()=>{window.removeEventListener("scroll",b)}),(a,c)=>{const k=E("Button");return s(),r("div",ra,[d(Ze,{"light-title":o.value},null,8,["light-title"]),m.value?(s(),r("div",da,[d(n(U),{class:"w-8 h-8 animate-spin text-stone-400"})])):i.value?(s(),r(M,{key:1},[i.value.status!=="published"&&n(h)?(s(),r("div",ca,[e("div",ma,[e("div",ua,[e("div",{class:D(["w-2 h-2 rounded-full animate-pulse",i.value.status==="pending"?"bg-amber-500":"bg-red-500"])},null,2),e("div",null,[e("p",{class:D(["text-[10px] md:text-xs font-black uppercase tracking-widest",i.value.status==="pending"?"text-amber-500":"text-red-500"])}," Status: "+u(i.value.status==="pending"?"Menunggu Kurasi":"Karya Perlu Perbaikan"),3),i.value.status==="rejected"&&i.value.rejection_reason?(s(),r("p",fa,' Catatan curator: "'+u(i.value.rejection_reason)+'" ',1)):i.value.status==="pending"?(s(),r("p",ha," Karya Anda sedang dalam antrean review oleh moderator. Hanya Anda yang dapat melihat halaman ini. ")):p("",!0)])]),e("div",ga,[n(f)?.id===i.value.user_id?(s(),x(k,{key:0,size:"sm",variant:"outline",class:"h-8 text-[10px] border-white/20 text-white hover:bg-white/10",onClick:c[0]||(c[0]=$=>n(l).push(`/archive/${i.value.slug}/edit`))},{default:g(()=>[...c[2]||(c[2]=[j(" Perbaiki Karya ",-1)])]),_:1})):p("",!0)])])])):p("",!0),d(Y,{name:"Video Player"},{default:g(()=>[d(It,{ref_key:"videoSectionRef",ref:w,film:i.value,activeVideoUrl:W.value,activeVideoType:X.value,onSwitchVideo:ke},{"action-bar":g(()=>[d(Pt,{film:i.value,voteData:J.value,voting:Q.value,isInCollection:Ce.value,processingCollection:je.value,hasLearningAssets:Ae.value,onToggleVote:_e,onToggleCollection:Te,onShare:De,onShareTo:Ie},null,8,["film","voteData","voting","isInCollection","processingCollection","hasLearningAssets"])]),_:1},8,["film","activeVideoUrl","activeVideoType"])]),_:1}),e("main",xa,[e("div",va,[d(Y,{name:"Konten Utama"},{default:g(()=>[d(Ps,{film:i.value,parsedSections:Fe.value,comments:ee.value,loadingComments:te.value,newComment:q.value,submittingComment:se.value,isLoggedIn:n(h),user:n(f),canModerate:we.value,totalCommentCount:Be.value,deletingCommentIds:N.value,"onUpdate:newComment":c[1]||(c[1]=$=>q.value=$),onSubmitComment:Ve,onDeleteComment:Le},null,8,["film","parsedSections","comments","loadingComments","newComment","submittingComment","isLoggedIn","user","canModerate","totalCommentCount","deletingCommentIds"])]),_:1}),d(Y,{name:"Sidebar"},{default:g(()=>[d(ta,{film:i.value},null,8,["film"])]),_:1})]),d(Y,{name:"Karya Terkait"},{default:g(()=>[d(ia,{relatedFilms:de.value},null,8,["relatedFilms"])]),_:1})])],64)):p("",!0),d(Xe)])}}};export{ka as default};
